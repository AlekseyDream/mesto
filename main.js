(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t,r){var n=t.data,o=t.userId,i=t.handleCardClick,u=t.handleLikeClick,a=t.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=n,this._name=n.name,this._link=n.link,this._cardId=n._id,this._likes=n.likes,this._userId=o,this._isOwner=n.owner._id,this._handleCardClick=i,this._handleLikeClick=u,this._handleDeleteCard=a,this._templateSelector=r,this._element=this._getTemplate(),this._deleteCard=this._element.querySelector(".gallery__button-delete"),this._cardLike=this._element.querySelector(".gallery__button-like"),this._cardImage=this._element.querySelector(".gallery__image"),this._cardName=this._element.querySelector(".gallery__title"),this._likeNumber=this._element.querySelector(".gallery__like-number")}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__element").cloneNode(!0)}},{key:"likeCard",value:function(e){this._likes=this._data.likes,this._likeNumber.textContent=e,this._cardLike.classList.toggle("gallery__button-like_active")}},{key:"isLike",value:function(){return this._cardLike.classList.contains("gallery__button-like_active")}},{key:"showLike",value:function(){var e=this;this._like.forEach((function(t){t._id===e._userId&&e._cardLike.classList.add("gallery__button-like_active")}))}},{key:"hiddenTrash",value:function(){this.isMyCard=this._userId===this._isOwner,this.isMyCard||this._deleteCard.classList.toggle("gallery__button-delete_hidden")}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"getCardId",value:function(){return this._cardId}},{key:"generateCard",value:function(){return this._cardName.textContent=this._name,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._likeNumber.textContent=this._likes.length,this._setEventListeners(),this.hiddenTrash(),this.showLike(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._deleteCard.addEventListener("click",(function(){e._element.remove()})),this._cardLike.addEventListener("click",(function(){e._cardLike.classList.toggle("gallery__button-like_active")})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var l=i((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_showInputError",(function(e,t){var r=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(n._listSelector.inputErrorClass),r.textContent=t,r.classList.add(n._listSelector.errorClass)})),u(this,"_hideInputError",(function(e){var t=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(n._listSelector.inputErrorClass),t.classList.remove(n._listSelector.errorClass),t.textContent=""})),u(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),u(this,"_toggleButtonState",(function(){n._hasInvalidInput()?(n._buttonElement.setAttribute("disabled",!0),n._buttonElement.classList.add(n._listSelector.inactiveButtonClass)):(n._buttonElement.removeAttribute("disabled"),n._buttonElement.classList.remove(n._listSelector.inactiveButtonClass))})),u(this,"_hasInvalidInput",(function(){return n._inputList.some((function(e){return!e.validity.valid}))})),u(this,"_setEventListeners",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n._toggleButtonState()}))}))})),u(this,"resetValid",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){n._hideInputError(e)}))})),u(this,"enableValidation",(function(){n._setEventListeners(),n._toggleButtonState()})),this._formElement=t,this._listSelector=r,this._inputList=Array.from(t.querySelectorAll(this._listSelector.inputSelector)),this._buttonElement=this._formElement.querySelector(this._listSelector.submitButtonSelector)}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var f=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){t._renderer(e)}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}var _=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleEscapeKey",(function(e){"Escape"===e.key&&r.close()})),d(this,"_closeByOverlay",(function(e){e.target.classList.contains("popup")&&r.close()})),this._popup=document.querySelector(t),this._popupProfileClose=this._popup.querySelector(".popup__button-close"),this.close=this.close.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscapeKey)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscapeKey)}},{key:"setEventListeners",value:function(){this._popupProfileClose.addEventListener("click",this.close),this._popup.addEventListener("click",this._closeByOverlay)}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},b.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(o){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(r=[{key:"open",value:function(e,t){b(S(u.prototype),"open",this).call(this),this._popupImage.src=t,this._popupImage.alt=e,this._popupCaption.textContent=e}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},O.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(o){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._formElement=r._popup.querySelector(".popup__form"),r._handleSumbit=t,r._inputList=Array.from(r._formElement.querySelectorAll(".popup__form-input")),r._button=r._formElement.querySelector(".popup__button-save"),r}return t=u,r=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){O(C(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"loading",value:function(e,t){this._button.textContent=e?"Сохранение...":t}},{key:"setEventListeners",value:function(){var e=this;O(C(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSumbit(e._getInputValues()),e.close()}))}}],r&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},q.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._form=r._popup.querySelector(".popup__form"),r._button=r._form.querySelector(".popup__button-save"),r._handleDeleteFormSubmit=t,r._cardInfo={},r}return t=u,(r=[{key:"open",value:function(e){q(T(u.prototype),"open",this).call(this),this._cardInfo=e}},{key:"loadingConfirm",value:function(e){this._button.textContent=e?"Удаление...":"Да"}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteFormSubmit(e._cardInfo)})),q(T(u.prototype),"setEventListeners",this).call(this)}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}var U=function(){function e(t){var r=t.nameSelector,n=t.aboutSelector,o=t.profileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(r),this.userAbout=document.querySelector(n),this.profileAvatar=document.querySelector(o)}var t,r;return t=e,(r=[{key:"setUserAvatar",value:function(e){var t=e.avatar;this.profileAvatar.src=t}},{key:"getUserInfo",value:function(){return{name:this.userName.textContent,about:this.userAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about;this.userName.textContent=t,this.userAbout.textContent=r}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(o)?o:String(o)),n)}var o}var V,M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,r;return t=e,(r=[{key:"_handleReply",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleReply)}},{key:"getAllCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleReply)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleReply)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleReply)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleReply)}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._handleReply)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._handleReply)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then(this._handleReply)}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),J=document.querySelector(".content"),K=J.querySelector(".profile__button"),F=document.querySelector(".profile__button-edit"),H=(J.querySelector(".profile__name"),J.querySelector(".profile__description"),document.querySelector(".profile__avatar"),document.querySelector(".popup_data_avatar")),z=(H.querySelector(".popup__form-input_data_avatar"),H.querySelector(".popup__form-avatar")),$=document.querySelector(".popup_data_profile-edit"),G=($.querySelector(".popup__button-close"),$.querySelector("#popup__form-profile")),Q=$.querySelector(".popup__form-input_data_name"),W=$.querySelector(".popup__form-input_data_about"),X=document.querySelector(".popup_data_card-add"),Y=(X.querySelector(".popup__button-close"),X.querySelector(".popup__form-input_data_title"),X.querySelector(".popup__form-input_data_link"),X.querySelector("#popup__form-card")),Z=(document.querySelector(".popup_data_image-add").querySelector(".popup__button-close"),document.querySelector(".profile__button-addCard")),ee=(document.querySelector(".gallery"),document.querySelector(".popup__image"),document.querySelector(".popup__caption"),{formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:"popup__form-input_error",errorClass:"popup__input-error_active"});function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=new l(Y,ee);re.enableValidation();var ne=new l(G,ee);ne.enableValidation();var oe=new l(z,ee);oe.enableValidation();var ie=new f({renderer:function(e){ie.addItem(ye(e))}},".gallery"),ue=new P(".popup_data_profile-edit",(function(e){ue.loading(!0),pe.updateUserInfo(e).then((function(e){fe.setUserInfo(e),ue.close()})).catch((function(e){console.log(e)})).finally((function(){ue.loading(!1,"Сохранить")}))}));ue.setEventListeners();var ae=new P(".popup_data_avatar",(function(e){ae.loading(!0),pe.updateUserAvatar(e).then((function(e){fe.setUserAvatar(e),ae.close()})).catch((function(e){console.log(e)})).finally((function(){ae.loading(!1,"Обновить")}))}));ae.setEventListeners();var le=new w(".popup_data_image-add");le.setEventListeners();var ce=new P(".popup_data_card-add",(function(e){ce.loading(!0),pe.addNewCard(e).then((function(e){var t=ye(e);ie.addItem(t),ce.close()})).catch((function(e){console.log(e)})).finally((function(){ce.loading(!1,"Создать")}))}));ce.setEventListeners();var se=new A(".popup_data_delete",(function(e){se.loadingConfirm(!0),pe.deleteCard(e.getCardId()).then((function(){e.deleteCard(),se.close()})).catch((function(e){console.log(e)})).finally((function(){se.loadingConfirm(!1)}))})),fe=new U({nameSelector:".profile__name",aboutSelector:".profile__description",profileAvatar:".profile__avatar"}),pe=new M({url:"https://mesto.nomoreparties.co/v1/cohort-62",headers:{"Content-Type":"application/json",authorization:"94c5f97f-b8cd-4838-8c4c-bf26058ba6d0"}});Promise.all([pe.getUserInfo(),pe.getAllCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];V=o._id,fe.setUserInfo(o),fe.setUserAvatar(o),ie.renderItems(i)})).catch((function(e){console.log(e)}));var ye=function(e){var t=new r({data:e,userId:V,handleCardClick:function(e,t){le.open(e,t)},handleLikeClick:function(){t.isLike()?pe.deleteLike(t.getCardId()).then((function(e){t.likeCard(e.likes.length)})).catch((function(e){console.log(e)})):pe.setLike(t.getCardId()).then((function(e){t.likeCard(e.likes.length)})).catch((function(e){console.log(e)}))},handleDeleteCard:function(){se.open(t)}},".gallery-template");return t.generateCard()};K.addEventListener("click",(function(){ue.open();var e=fe.getUserInfo();Q.value=e.name,W.value=e.about,ne.resetValid()})),Z.addEventListener("click",(function(){ce.open(),re.resetValid()})),F.addEventListener("click",(function(){oe.resetValid(),ae.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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IndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cE5vdGljZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvdXRpbHMvY29uc3RhbnN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgZGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCB9LFxyXG4gICAgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9uYW1lID0gZGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IGRhdGEubGluaztcclxuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fdXNlcklkID0gdXNlcklkO1xyXG4gICAgdGhpcy5faXNPd25lciA9IGRhdGEub3duZXIuX2lkO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCA9IGhhbmRsZURlbGV0ZUNhcmQ7XHJcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2J1dHRvbi1kZWxldGUnKTtcclxuICAgIHRoaXMuX2NhcmRMaWtlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fYnV0dG9uLWxpa2UnKTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9jYXJkTmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX3RpdGxlJyk7XHJcbiAgICB0aGlzLl9saWtlTnVtYmVyID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeV9fbGlrZS1udW1iZXInKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19lbGVtZW50XCIpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNvdW50KSB7XHJcbiAgICB0aGlzLl9saWtlcyA9IHRoaXMuX2RhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gY291bnQ7XHJcbiAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QudG9nZ2xlKFwiZ2FsbGVyeV9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gIH1cclxuXHJcbiAgaXNMaWtlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRMaWtlLmNsYXNzTGlzdC5jb250YWlucyhcImdhbGxlcnlfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIHNob3dMaWtlKCkge1xyXG4gICAgdGhpcy5fbGlrZS5mb3JFYWNoKChlbCkgPT4ge1xyXG4gICAgICBpZiAoZWwuX2lkID09PSB0aGlzLl91c2VySWQpIHtcclxuICAgICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuYWRkKFwiZ2FsbGVyeV9fYnV0dG9uLWxpa2VfYWN0aXZlXCIpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGhpZGRlblRyYXNoKCkge1xyXG4gICAgdGhpcy5pc015Q2FyZCA9IHRoaXMuX3VzZXJJZCA9PT0gdGhpcy5faXNPd25lcjtcclxuICAgIGlmICghdGhpcy5pc015Q2FyZCkge1xyXG4gICAgICB0aGlzLl9kZWxldGVDYXJkLmNsYXNzTGlzdC50b2dnbGUoXCJnYWxsZXJ5X19idXR0b24tZGVsZXRlX2hpZGRlblwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlbGV0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkSWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZElkO1xyXG4gIH1cclxuXHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2NhcmROYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9saWtlTnVtYmVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuaGlkZGVuVHJhc2goKTtcclxuICAgIHRoaXMuc2hvd0xpa2UoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZ2FsbGVyeV9fYnV0dG9uLWxpa2VfYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBsaXN0U2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9saXN0U2VsZWN0b3IgPSBsaXN0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2xpc3RTZWxlY3Rvci5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmVycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9O1xyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3BvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3BvcHVwUHJvZmlsZUNsb3NlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uLWNsb3NlXCIpO1xyXG4gICAgdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QuYWRkKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUtleSk7XHJcbiAgfVxyXG5cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKFwicG9wdXBfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleXVwXCIsIHRoaXMuX2hhbmRsZUVzY2FwZUtleSk7XHJcblxyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY2FwZUtleSA9IChldnQpID0+IHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB0aGlzLmNsb3NlKCk7XHJcbiAgfVxyXG5cclxuICBfY2xvc2VCeU92ZXJsYXkgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fcG9wdXBQcm9maWxlQ2xvc2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsb3NlKTtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VCeU92ZXJsYXkpO1xyXG4gIH1cclxufVxyXG5cclxuXHJcblxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpXHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIik7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXB0aW9uXCIpO1xyXG4gIH1cclxuXHJcbiAgb3BlbihuYW1lLCBsaW5rKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IG5hbWU7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlU3VtYml0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZVN1bWJpdCA9IGhhbmRsZVN1bWJpdDtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9fZm9ybS1pbnB1dFwiKSk7XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19idXR0b24tc2F2ZVwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIGNvbnN0IGZvcm1WYWx1ZXMgPSB7fTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBmb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBmb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcclxuICB9XHJcblxyXG4gIGxvYWRpbmcoaXNMb2FkaW5nLCBjb250ZW50KSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IFwi0KHQvtGF0YDQsNC90LXQvdC40LUuLi5cIjtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVTdW1iaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBOb3RpY2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxldG9yLCBoYW5kbGVEZWxldGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGV0b3IpO1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9idXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLXNhdmUnKTtcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQgPSBoYW5kbGVEZWxldGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fY2FyZEluZm8gPSB7fTtcclxuICB9XHJcblxyXG4gIG9wZW4oY2FyZCkge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fY2FyZEluZm8gPSBjYXJkO1xyXG4gIH1cclxuXHJcbiAgbG9hZGluZ0NvbmZpcm0oaXNMb2FkaW5nKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi50ZXh0Q29udGVudCA9IFwi0KPQtNCw0LvQtdC90LjQtS4uLlwiXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcItCU0LBcIlxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCh0aGlzLl9jYXJkSW5mbyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCBhYm91dFNlbGVjdG9yLCBwcm9maWxlQXZhdGFyIH0pIHtcclxuICAgICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcclxuICAgICAgdGhpcy51c2VyQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0U2VsZWN0b3IpO1xyXG4gICAgICB0aGlzLnByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHByb2ZpbGVBdmF0YXIpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgICAgICB0aGlzLnByb2ZpbGVBdmF0YXIuc3JjID0gYXZhdGFyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgIGFib3V0OiB0aGlzLnVzZXJBYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRVc2VySW5mbyh7bmFtZSwgYWJvdXR9KSB7XHJcbiAgICAgICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICAgICAgdGhpcy51c2VyQWJvdXQudGV4dENvbnRlbnQgPSBhYm91dDtcclxuICAgICAgfVxyXG4gICAgfSIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XHJcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwTm90aWNlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwTm90aWNlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVCdXR0b24sXHJcbiAgcHJvZmlsZUJ1dHRvbkVkaXQsXHJcbiAgZm9ybUVkaXRQcm9maWxlLFxyXG4gIGlucHV0TmFtZSxcclxuICBpbnB1dEFib3V0LFxyXG4gIGF2YXRhcklucHV0LFxyXG4gIGNhcmRGb3JtLFxyXG4gIGJ1dHRvbkFkZENhcmQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBhcGlQYXJhbWV0ZXJzLFxyXG4gIGF2YXRhckZvcm1cclxufVxyXG4gIGZyb20gXCIuLi91dGlscy9jb25zdGFuc3QuanNcIjtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG5jb25zdCBjYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY2FyZEZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG5jYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdFByb2ZpbGUsIHZhbGlkYXRpb25Db25maWcpO1xyXG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGF2YXRhckZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHsgc2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpOyB9LFxyXG59LCBcIi5nYWxsZXJ5XCIpO1xyXG5cclxuY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZGF0YV9wcm9maWxlLWVkaXRcIiwgKHVzZXJEYXRhKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLmxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckluZm8odXNlckRhdGEpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHJlcyk7XHJcbiAgICAgIHBvcHVwUHJvZmlsZS5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cFByb2ZpbGUubG9hZGluZyhmYWxzZSwgXCLQodC+0YXRgNCw0L3QuNGC0YxcIik7XHJcbiAgICB9KTtcclxufSk7XHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9kYXRhX2F2YXRhclwiLCAodXNlckRhdGEpID0+IHtcclxuICBwb3B1cEF2YXRhci5sb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJBdmF0YXIodXNlckRhdGEpXHJcbiAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIocmVzKTtcclxuICAgICAgcG9wdXBBdmF0YXIuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBBdmF0YXIubG9hZGluZyhmYWxzZSwgXCLQntCx0L3QvtCy0LjRgtGMXCIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wb3B1cEF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIucG9wdXBfZGF0YV9pbWFnZS1hZGRcIik7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cENhcmRzID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZGF0YV9jYXJkLWFkZFwiLCAoY2FyZERhdGEpID0+IHtcclxuICBwb3B1cENhcmRzLmxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZChjYXJkRGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIHBvcHVwQ2FyZHMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBDYXJkcy5sb2FkaW5nKGZhbHNlLCBcItCh0L7Qt9C00LDRgtGMXCIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wb3B1cENhcmRzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBOb3RpY2UoXCIucG9wdXBfZGF0YV9kZWxldGVcIiwgKGNhcmQpID0+IHtcclxuICBwb3B1cENhcmREZWxldGUubG9hZGluZ0NvbmZpcm0odHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcclxuICAgICAgcG9wdXBDYXJkRGVsZXRlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwQ2FyZERlbGV0ZS5sb2FkaW5nQ29uZmlybShmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgYWJvdXRTZWxlY3RvcjogXCIucHJvZmlsZV9fZGVzY3JpcHRpb25cIixcclxuICBwcm9maWxlQXZhdGFyOiBcIi5wcm9maWxlX19hdmF0YXJcIixcclxufSk7XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaVBhcmFtZXRlcnMpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0QWxsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZEl0ZW1zXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XHJcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRJdGVtcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkTmV3ID0gbmV3IENhcmQoXHJcbiAgICAgIHtcclxuICAgICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgIGlmIChjYXJkTmV3LmlzTGlrZSgpKSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5kZWxldGVMaWtlKGNhcmROZXcuZ2V0Q2FyZElkKCkpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZE5ldy5saWtlQ2FyZChyZXMubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgLnNldExpa2UoY2FyZE5ldy5nZXRDYXJkSWQoKSlcclxuICAgICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkTmV3Lmxpa2VDYXJkKHJlcy5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVEZWxldGVDYXJkOiAoKSA9PiB7XHJcbiAgICAgICAgICBwb3B1cENhcmREZWxldGUub3BlbihjYXJkTmV3KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBcIi5nYWxsZXJ5LXRlbXBsYXRlXCJcclxuICAgICk7XHJcbiAgICBcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmROZXcuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfTtcclxuXHJcbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dE5hbWUudmFsdWUgPSBpbmZvLm5hbWU7XHJcbiAgaW5wdXRBYm91dC52YWx1ZSA9IGluZm8uYWJvdXQ7XHJcbiAgcHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cENhcmRzLm9wZW4oKTtcclxuICBjYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWQoKTtcclxufSk7XHJcblxyXG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGF2YXRhclZhbGlkYXRvci5yZXNldFZhbGlkKCk7XHJcbiAgcG9wdXBBdmF0YXIub3BlbigpO1xyXG59KTsiLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gICAgY29uc3RydWN0b3IoYXBpUGFyYW1ldGVycykge1xyXG4gICAgICB0aGlzLl91cmwgPSBhcGlQYXJhbWV0ZXJzLnVybDtcclxuICAgICAgdGhpcy5faGVhZGVycyA9IGFwaVBhcmFtZXRlcnMuaGVhZGVycztcclxuICAgIH1cclxuICBcclxuICAgIF9oYW5kbGVSZXBseShyZXMpIHtcclxuICAgICAgaWYgKHJlcy5vaykge1xyXG4gICAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgICB9XHJcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4oXHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVwbHlcclxuICAgICAgKTtcclxuICAgIH1cclxuICBcclxuICAgIGdldEFsbENhcmRzKCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHsgaGVhZGVyczogdGhpcy5faGVhZGVycyB9KVxyXG4gICAgICAudGhlbihcclxuICAgICAgICB0aGlzLl9oYW5kbGVSZXBseVxyXG4gICAgICApO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgdXBkYXRlVXNlckluZm8oZGF0YSkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dCB9KSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVwbHkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgYWRkTmV3Q2FyZChjYXJkRGF0YSkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoY2FyZERhdGEpLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXBseSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkZWxldGVDYXJkKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXBseSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBzZXRMaWtlKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXBseSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBkZWxldGVMaWtlKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXBseSk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICB1cGRhdGVVc2VyQXZhdGFyKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSksXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlcGx5KTtcclxuICAgIH1cclxuICB9IiwiZXhwb3J0IGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbkVkaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWVkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZURlc2NyaXB0aW9uID0gY29udGVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fZGVzY3JpcHRpb24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfZGF0YV9hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJJbnB1dCA9IHBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV9hdmF0YXJcIik7XHJcbmV4cG9ydCBjb25zdCBhdmF0YXJGb3JtID0gcG9wdXBBdmF0YXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1hdmF0YXJcIik7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2RhdGFfcHJvZmlsZS1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGVDbG9zZSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1jbG9zZScpO1xyXG5leHBvcnQgY29uc3QgZm9ybUVkaXRQcm9maWxlID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fZm9ybS1wcm9maWxlJyk7XHJcbmV4cG9ydCBjb25zdCBpbnB1dE5hbWUgPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfbmFtZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRBYm91dCA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV9hYm91dCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kYXRhX2NhcmQtYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRDbG9zZSA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1jbG9zZScpO1xyXG5leHBvcnQgY29uc3QgbmFtZSA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV90aXRsZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRJbWFnZSA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV9saW5rJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkRm9ybSA9IHBvcHVwQ2FyZC5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2Zvcm0tY2FyZCcpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FyZEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2RhdGFfaW1hZ2UtYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRJbWFnZUNsb3NlID0gcG9wdXBDYXJkSW1hZ2UucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBidXR0b25BZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1hZGRDYXJkJyk7XHJcbmV4cG9ydCBjb25zdCBjYXJkQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnknKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcclxuXHJcbmV4cG9ydCBjb25zdCBhcGlQYXJhbWV0ZXJzID0ge1xyXG4gICAgdXJsOiBcImh0dHBzOi8vbWVzdG8ubm9tb3JlcGFydGllcy5jby92MS9jb2hvcnQtNjJcIixcclxuICAgIGhlYWRlcnM6IHtcclxuICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgICAgIGF1dGhvcml6YXRpb246IFwiOTRjNWY5N2YtYjhjZC00ODM4LThjNGMtYmYyNjA1OGJhNmQwXCIsXHJcbiAgICB9LFxyXG4gIH07XHJcblxyXG5leHBvcnQgY29uc3QgdmFsaWRhdGlvbkNvbmZpZyA9IHtcclxuICAgIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXHJcbiAgICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19mb3JtLWlucHV0JyxcclxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19idXR0b24tc2F2ZScsXHJcbiAgICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbi1zYXZlX2luYWN0aXZlJyxcclxuICAgIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19mb3JtLWlucHV0X2Vycm9yJyxcclxuICAgIGVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXQtZXJyb3JfYWN0aXZlJyxcclxufTsiXSwibmFtZXMiOlsiQ2FyZCIsIl9yZWYiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiZGF0YSIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2RhdGEiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2xpa2VzIiwibGlrZXMiLCJfdXNlcklkIiwiX2lzT3duZXIiLCJvd25lciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2RlbGV0ZUNhcmQiLCJxdWVyeVNlbGVjdG9yIiwiX2NhcmRMaWtlIiwiX2NhcmRJbWFnZSIsIl9jYXJkTmFtZSIsIl9saWtlTnVtYmVyIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJjb3VudCIsInRleHRDb250ZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiY29udGFpbnMiLCJfdGhpcyIsIl9saWtlIiwiZm9yRWFjaCIsImVsIiwiYWRkIiwiaXNNeUNhcmQiLCJyZW1vdmUiLCJhbHQiLCJzcmMiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJoaWRkZW5UcmFzaCIsInNob3dMaWtlIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJmb3JtRWxlbWVudCIsImxpc3RTZWxlY3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImNvbmNhdCIsImlkIiwiX2xpc3RTZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX2lucHV0TGlzdCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiaXRlbXMiLCJyZXZlcnNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJfcG9wdXAiLCJfcG9wdXBQcm9maWxlQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUVzY2FwZUtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VCeU92ZXJsYXkiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1bWJpdCIsIl9oYW5kbGVTdW1iaXQiLCJfYnV0dG9uIiwiZm9ybVZhbHVlcyIsImlucHV0IiwicmVzZXQiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwTm90aWNlIiwicG9wdXBTZWxldG9yIiwiaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQiLCJfY2FyZEluZm8iLCJjYXJkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwicHJvZmlsZUF2YXRhciIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiX3JlZjIiLCJhdmF0YXIiLCJhYm91dCIsIl9yZWYzIiwiQXBpIiwiYXBpUGFyYW1ldGVycyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlcGx5IiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkRGF0YSIsInByb2ZpbGVCdXR0b24iLCJwcm9maWxlQnV0dG9uRWRpdCIsInBvcHVwQXZhdGFyIiwiYXZhdGFyRm9ybSIsInBvcHVwUHJvZmlsZSIsImZvcm1FZGl0UHJvZmlsZSIsImlucHV0TmFtZSIsImlucHV0QWJvdXQiLCJwb3B1cENhcmQiLCJjYXJkRm9ybSIsImJ1dHRvbkFkZENhcmQiLCJ2YWxpZGF0aW9uQ29uZmlnIiwiZm9ybVNlbGVjdG9yIiwiY2FyZFZhbGlkYXRvciIsImVuYWJsZVZhbGlkYXRpb24iLCJwcm9maWxlVmFsaWRhdG9yIiwiYXZhdGFyVmFsaWRhdG9yIiwic2VjdGlvbiIsImFkZEl0ZW0iLCJjcmVhdGVDYXJkIiwidXNlckRhdGEiLCJsb2FkaW5nIiwiYXBpIiwidXBkYXRlVXNlckluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXJzIiwidXBkYXRlVXNlckF2YXRhciIsInNldFVzZXJBdmF0YXIiLCJwb3B1cFdpdGhJbWFnZSIsInBvcHVwQ2FyZHMiLCJhZGROZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJwb3B1cENhcmREZWxldGUiLCJsb2FkaW5nQ29uZmlybSIsImRlbGV0ZUNhcmQiLCJnZXRDYXJkSWQiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwiZ2V0VXNlckluZm8iLCJnZXRBbGxDYXJkcyIsImNhcmRJdGVtcyIsInJlbmRlckl0ZW1zIiwiY2FyZE5ldyIsIm9wZW4iLCJpc0xpa2UiLCJkZWxldGVMaWtlIiwibGlrZUNhcmQiLCJzZXRMaWtlIiwiZ2VuZXJhdGVDYXJkIiwiaW5mbyIsInJlc2V0VmFsaWQiXSwic291cmNlUm9vdCI6IiJ9
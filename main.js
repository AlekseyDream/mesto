(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t,r){var n=t.Card,o=t.userId,i=t.handleCardClick,u=t.handleLikeClick,a=t.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._Card=n,this._name=n.name,this._link=n.link,this._cardId=n._id,this._like=n.like,this._userId=o,this._isOwner=n.owner._id,this._handleCardClick=i,this._handleLikeClick=u,this._handleDeleteCard=a,this._templateSelector=r,this._element=this._getTemplate(),this._deleteCard=this._element.querySelector(".gallery__button-delete"),this._cardLike=this._element.querySelector(".gallery__button-like"),this._cardImage=this._element.querySelector(".gallery__image"),this._cardName=this._element.querySelector(".gallery__title"),this._likeNumber=this._element.querySelector(".gallery__like-number")}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__element").cloneNode(!0)}},{key:"likeCard",value:function(e){this._like=this._Card.like,this._likeNumber.textContent=e,this._cardLike.classList.toggle("gallery__button-like_active")}},{key:"isLike",value:function(){return this._cardLike.classList.contains("gallery__button-like_active")}},{key:"showLike",value:function(){var e=this;this._like.forEach((function(t){t._id===e._userId&&e._cardLike.classList.add("gallery__button-like_active")}))}},{key:"hiddenTrash",value:function(){this.isMyCard=this._userId===this._isOwner,this.isMyCard||this._deleteCard.classList.toggle("gallery__button-delete_hidden")}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"getCardId",value:function(){return this._cardId}},{key:"generateCard",value:function(){return this._cardName.textContent=this._name,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._likeNumber.textContent=this._like.length,this._setEventListeners(),this.hiddenTrash(),this.showLike(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._deleteCard.addEventListener("click",(function(){e._element.remove()})),this._cardLike.addEventListener("click",(function(){e._cardLike.classList.toggle("gallery__button-like_active")})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var l=i((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_showInputError",(function(e,t){var r=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(n._listSelector.inputErrorClass),r.textContent=t,r.classList.add(n._listSelector.errorClass)})),u(this,"_hideInputError",(function(e){var t=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(n._listSelector.inputErrorClass),t.classList.remove(n._listSelector.errorClass),t.textContent=""})),u(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),u(this,"_toggleButtonState",(function(){n._hasInvalidInput()?(n._buttonElement.setAttribute("disabled",!0),n._buttonElement.classList.add(n._listSelector.inactiveButtonClass)):(n._buttonElement.removeAttribute("disabled"),n._buttonElement.classList.remove(n._listSelector.inactiveButtonClass))})),u(this,"_hasInvalidInput",(function(){return n._inputList.some((function(e){return!e.validity.valid}))})),u(this,"_setEventListeners",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n._toggleButtonState()}))}))})),u(this,"resetValid",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){n._hideInputError(e)}))})),u(this,"enableValidation",(function(){n._setEventListeners(),n._toggleButtonState()})),this._formElement=t,this._listSelector=r,this._inputList=Array.from(t.querySelectorAll(this._listSelector.inputSelector)),this._buttonElement=this._formElement.querySelector(this._listSelector.submitButtonSelector)}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var f=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._items.reverse().forEach((function(t){e._renderer(t)}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}var _=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleEscapeKey",(function(e){"Escape"===e.key&&r.close()})),d(this,"_closeByOverlay",(function(e){e.target.classList.contains("popup")&&r.close()})),this._popup=document.querySelector(t),this._popupProfileClose=this._popup.querySelector(".popup__button-close"),this.close=this.close.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscapeKey)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscapeKey)}},{key:"setEventListeners",value:function(){this._popupProfileClose.addEventListener("click",this.close),this._popup.addEventListener("click",this._closeByOverlay)}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function v(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==m(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===m(o)?o:String(o)),n)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},b.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(o){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(r=[{key:"open",value:function(e,t){b(S(u.prototype),"open",this).call(this),this._popupImage.src=t,this._popupImage.alt=e,this._popupCaption.textContent=e}}])&&v(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function C(){return C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},C.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(n);if(o){var r=j(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._formElement=r._popup.querySelector(".popup__form"),r._handleSumbit=t,r._inputList=Array.from(r._formElement.querySelectorAll(".popup__form-input")),r._button=r._formElement.querySelector(".popup__button-save"),r}return t=u,r=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){C(j(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"loading",value:function(e,t){this._button.textContent=e?"Сохранение...":t}},{key:"setEventListeners",value:function(){var e=this;C(j(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSumbit(e._getInputValues()),e.close()}))}}],r&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},q.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._form=r._popup.querySelector(".popup__form"),r._button=r._form.querySelector(".popup__button-save"),r._handleDeleteFormSubmit=t,r._cardInfo={},r}return t=u,(r=[{key:"open",value:function(e){q(T(u.prototype),"open",this).call(this),this._cardInfo=e}},{key:"loadingConfirm",value:function(e){this._button.textContent=e?"Удаление...":"Да"}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteFormSubmit(e._cardInfo)})),q(T(u.prototype),"setEventListeners",this).call(this)}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}var U=function(){function e(t){var r=t.nameSelector,n=t.aboutSelector,o=t.profileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(r),this.userAbout=document.querySelector(n),this.profileAvatar=document.querySelector(o)}var t,r;return t=e,r=[{key:"setUserAvatar",value:function(e){var t=e.profileAvatar;this.profileAvatar.src=t}},{key:"getUserInfo",value:function(){return{name:this.userName.textContent,about:this.userAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.inputName,r=e.inputAbout;this.userName.textContent=t,this.userAbout.textContent=r}}],r&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(o)?o:String(o)),n)}var o}var V=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,r;return t=e,(r=[{key:"_handleReply",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then(this._handleReply)}},{key:"getAllCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then(this._handleReply)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._handleReply)}},{key:"addNewCard",value:function(e){return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._handleReply)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._handleReply)}},{key:"setLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._handleReply)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._handleReply)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._url,"/users/me/avatar"),{headers:this._headers,method:"PATCH",body:JSON.stringify(e)}).then(this._handleReply)}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),M=document.querySelector(".content"),J=M.querySelector(".profile__button"),K=document.querySelector(".profile__button-edit"),F=(M.querySelector(".profile__name"),M.querySelector(".profile__description"),document.querySelector(".profile__avatar"),document.querySelector(".popup_data_avatar")),H=(F.querySelector(".popup__form-input_data_avatar"),F.querySelector(".popup__form-avatar")),z=document.querySelector(".popup_data_profile-edit"),$=(z.querySelector(".popup__button-close"),z.querySelector("#popup__form-profile")),G=z.querySelector(".popup__form-input_data_name"),Q=z.querySelector(".popup__form-input_data_about"),W=document.querySelector(".popup_data_card-add"),X=(W.querySelector(".popup__button-close"),W.querySelector(".popup__form-input_data_title"),W.querySelector(".popup__form-input_data_link"),W.querySelector("#popup__form-card")),Y=(document.querySelector(".popup_data_image-add").querySelector(".popup__button-close"),document.querySelector(".profile__button-addCard")),Z=(document.querySelector(".gallery"),document.querySelector(".popup__image"),document.querySelector(".popup__caption"),{formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:"popup__form-input_error",errorClass:"popup__input-error_active"});function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var te=new l(X,Z);te.enableValidation();var re=new l($,Z);re.enableValidation();var ne=new l(H,Z);ne.enableValidation();var oe=new f({renderer:function(e){oe.addItem(pe(e))}},".gallery"),ie=new P(".popup_data_profile-edit",(function(e){ie.loading(!0),fe.updateUserInfo(e).then((function(e){se.setUserInfo(e),ie.close()})).catch((function(e){console.log(e)})).finally((function(){ie.loading(!1,"Сохранить")}))}));ie.setEventListeners();var ue=new P(".popup_data_avatar",(function(e){ue.loading(!0),fe.updateUserAvatar(e).then((function(e){se.setUserAvatar(e),ue.close()})).catch((function(e){console.log(e)})).finally((function(){ue.loading(!1,"Обновить")}))}));ue.setEventListeners();var ae=new w(".popup_data_image-add");ae.setEventListeners();var le=new P(".popup_data_card-add",(function(e){popupCard.loading(!0),fe.addNewCard(e).then((function(e){var t=pe(e);oe.addItem(t),le.close()})).catch((function(e){console.log(e)})).finally((function(){le.loading(!1,"Создать")}))}));le.setEventListeners();var ce=new A(".popup_data_delete",(function(e){ce.loadingConfirm(!0),fe.deleteCard(e.getCardId()).then((function(){e.deleteCard(),ce.close()})).catch((function(e){console.log(e)})).finally((function(){ce.loadingConfirm(!1)}))})),se=new U({nameSelector:".profile__name",infoSelector:".profile__description",profileAvatar:".profile__avatar"}),fe=new V({url:"https://mesto.nomoreparties.co/v1/cohort-62",headers:{"Content-Type":"application/json",authorization:"94c5f97f-b8cd-4838-8c4c-bf26058ba6d0"}});Promise.all([fe.getUserInfo(),fe.getAllCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ee(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ee(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];userId=o._id,se.setUserInfo(o),se.setUserAvatar(o),oe.renderItems(i)})).catch((function(e){console.log(e)}));var pe=function(e){var t=new r({Card:e,userId,handleCardClick:function(e,t){ae.open(e,t)},handleLikeClick:function(){t.isLike()?fe.deleteLike(t.getCardId()).then((function(e){t.likeCard(e.like.length)})).catch((function(e){console.log(e)})):fe.setLike(t.getCardId()).then((function(e){t.likeCard(e.like.length)})).catch((function(e){console.log(e)}))},handleDeleteCard:function(){ce.open(t)}},".gallery-template");return t.generateCard()};J.addEventListener("click",(function(){ie.open();var e=se.getUserInfo();G.value=e.name,Q.value=e.about,re.resetValid()})),Y.addEventListener("click",(function(){le.open(),te.resetValid()})),K.addEventListener("click",(function(){ne.resetValid(),ue.open()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWFpbi5qcyIsIm1hcHBpbmdzIjoiMHJCQUFxQkEsRUFBSSxXQUN2QixTQUFBQSxFQUFBQyxFQUNFQyxHQUFrQixJQURORixFQUFJQyxFQUFKRCxLQUFNRyxFQUFNRixFQUFORSxPQUFRQyxFQUFlSCxFQUFmRyxnQkFBaUJDLEVBQWVKLEVBQWZJLGdCQUFpQkMsRUFBZ0JMLEVBQWhCSyxrQiw0RkFBZ0JDLENBQUEsS0FBQVAsR0FFNUVRLEtBQUtDLE1BQVFULEVBQ2JRLEtBQUtFLE1BQVFWLEVBQUtXLEtBQ2xCSCxLQUFLSSxNQUFRWixFQUFLYSxLQUNsQkwsS0FBS00sUUFBVWQsRUFBS2UsSUFDcEJQLEtBQUtRLE1BQVFoQixFQUFLaUIsS0FDbEJULEtBQUtVLFFBQVVmLEVBQ2ZLLEtBQUtXLFNBQVduQixFQUFLb0IsTUFBTUwsSUFDM0JQLEtBQUthLGlCQUFtQmpCLEVBQ3hCSSxLQUFLYyxpQkFBbUJqQixFQUN4QkcsS0FBS2Usa0JBQW9CakIsRUFDekJFLEtBQUtnQixrQkFBb0J0QixFQUN6Qk0sS0FBS2lCLFNBQVdqQixLQUFLa0IsZUFDckJsQixLQUFLbUIsWUFBY25CLEtBQUtpQixTQUFTRyxjQUFjLDJCQUMvQ3BCLEtBQUtxQixVQUFZckIsS0FBS2lCLFNBQVNHLGNBQWMseUJBQzdDcEIsS0FBS3NCLFdBQWF0QixLQUFLaUIsU0FBU0csY0FBYyxtQkFDOUNwQixLQUFLdUIsVUFBWXZCLEtBQUtpQixTQUFTRyxjQUFjLG1CQUM3Q3BCLEtBQUt3QixZQUFjeEIsS0FBS2lCLFNBQVNHLGNBQWMsd0JBQ2pELEMsUUFpRUMsTyxFQWpFQTVCLEcsRUFBQSxFQUFBaUMsSUFBQSxlQUFBQyxNQUVELFdBQ0UsT0FBT0MsU0FBU1AsY0FBY3BCLEtBQUtnQixtQkFBbUJZLFFBQVFSLGNBQWMscUJBQXFCUyxXQUFVLEVBQzdHLEdBQUMsQ0FBQUosSUFBQSxXQUFBQyxNQUVELFNBQVNJLEdBQ1A5QixLQUFLUSxNQUFRUixLQUFLQyxNQUFNUSxLQUN4QlQsS0FBS3dCLFlBQVlPLFlBQWNELEVBQy9COUIsS0FBS3FCLFVBQVVXLFVBQVVDLE9BQU8sOEJBQ2xDLEdBQUMsQ0FBQVIsSUFBQSxTQUFBQyxNQUVELFdBQ0UsT0FBTzFCLEtBQUtxQixVQUFVVyxVQUFVRSxTQUFTLDhCQUMzQyxHQUFDLENBQUFULElBQUEsV0FBQUMsTUFFRCxXQUFXLElBQUFTLEVBQUEsS0FDVG5DLEtBQUtRLE1BQU00QixTQUFRLFNBQUNDLEdBQ2RBLEVBQUc5QixNQUFRNEIsRUFBS3pCLFNBQ2xCeUIsRUFBS2QsVUFBVVcsVUFBVU0sSUFBSSw4QkFFakMsR0FDRixHQUFDLENBQUFiLElBQUEsY0FBQUMsTUFFRCxXQUNFMUIsS0FBS3VDLFNBQVd2QyxLQUFLVSxVQUFZVixLQUFLVyxTQUNqQ1gsS0FBS3VDLFVBQ1J2QyxLQUFLbUIsWUFBWWEsVUFBVUMsT0FBTyxnQ0FFdEMsR0FBQyxDQUFBUixJQUFBLGFBQUFDLE1BRUQsV0FDRTFCLEtBQUtpQixTQUFTdUIsU0FDZHhDLEtBQUtpQixTQUFXLElBQ2xCLEdBQUMsQ0FBQVEsSUFBQSxZQUFBQyxNQUVELFdBQ0UsT0FBTzFCLEtBQUtNLE9BQ2QsR0FBQyxDQUFBbUIsSUFBQSxlQUFBQyxNQUdELFdBUUUsT0FQQTFCLEtBQUt1QixVQUFVUSxZQUFjL0IsS0FBS0UsTUFDbENGLEtBQUtzQixXQUFXbUIsSUFBTXpDLEtBQUtFLE1BQzNCRixLQUFLc0IsV0FBV29CLElBQU0xQyxLQUFLSSxNQUMzQkosS0FBS3dCLFlBQVlPLFlBQWMvQixLQUFLUSxNQUFNbUMsT0FDMUMzQyxLQUFLNEMscUJBQ0w1QyxLQUFLNkMsY0FDTDdDLEtBQUs4QyxXQUNFOUMsS0FBS2lCLFFBQ2QsR0FBQyxDQUFBUSxJQUFBLHFCQUFBQyxNQUdELFdBQXFCLElBQUFxQixFQUFBLEtBQ25CL0MsS0FBS21CLFlBQVk2QixpQkFBaUIsU0FBUyxXQUN6Q0QsRUFBSzlCLFNBQVN1QixRQUNoQixJQUVBeEMsS0FBS3FCLFVBQVUyQixpQkFBaUIsU0FBUyxXQUN2Q0QsRUFBSzFCLFVBQVVXLFVBQVVDLE9BQU8sOEJBQ2xDLElBRUFqQyxLQUFLc0IsV0FBVzBCLGlCQUFpQixTQUFTLFdBQ3hDRCxFQUFLbEMsaUJBQWlCa0MsRUFBSzdDLE1BQU82QyxFQUFLM0MsTUFDekMsR0FDRixNLG9FQUFDWixDQUFBLENBckZzQixHLCs1QkNBSnlELEVBQWFDLEdBQ2hDLFNBQUFELEVBQVlFLEVBQWFDLEdBQWMsSUFBQWpCLEVBQUEsTSw0RkFBQXBDLENBQUEsS0FBQWtELEdBQUFJLEVBQUEsd0JBT3JCLFNBQUNDLEVBQWNDLEdBQy9CLElBQU1DLEVBQWVyQixFQUFLc0IsYUFBYXJDLGNBQWMsSUFBRHNDLE9BQUtKLEVBQWFLLEdBQUUsV0FDeEVMLEVBQWF0QixVQUFVTSxJQUFJSCxFQUFLeUIsY0FBY0MsaUJBQzlDTCxFQUFhekIsWUFBY3dCLEVBQzNCQyxFQUFheEIsVUFBVU0sSUFBSUgsRUFBS3lCLGNBQWNFLFdBQ2hELElBQUNULEVBQUEsd0JBRWlCLFNBQUNDLEdBQ2pCLElBQU1FLEVBQWVyQixFQUFLc0IsYUFBYXJDLGNBQWMsSUFBRHNDLE9BQUtKLEVBQWFLLEdBQUUsV0FDeEVMLEVBQWF0QixVQUFVUSxPQUFPTCxFQUFLeUIsY0FBY0MsaUJBQ2pETCxFQUFheEIsVUFBVVEsT0FBT0wsRUFBS3lCLGNBQWNFLFlBQ2pETixFQUFhekIsWUFBYyxFQUM3QixJQUFDc0IsRUFBQSw0QkFFcUIsU0FBQ0MsR0FDaEJBLEVBQWFTLFNBQVNDLE1BSXpCN0IsRUFBSzhCLGdCQUFnQlgsR0FIckJuQixFQUFLK0IsZ0JBQWdCWixFQUFjQSxFQUFhYSxrQkFLcEQsSUFBQ2QsRUFBQSwyQkFFb0IsV0FDZmxCLEVBQUtpQyxvQkFDUGpDLEVBQUtrQyxlQUFlQyxhQUFhLFlBQVksR0FDN0NuQyxFQUFLa0MsZUFBZXJDLFVBQVVNLElBQUlILEVBQUt5QixjQUFjVyx1QkFHckRwQyxFQUFLa0MsZUFBZUcsZ0JBQWdCLFlBQ3BDckMsRUFBS2tDLGVBQWVyQyxVQUFVUSxPQUFPTCxFQUFLeUIsY0FBY1cscUJBRTVELElBQUNsQixFQUFBLHlCQUVrQixXQUNqQixPQUFPbEIsRUFBS3NDLFdBQVdDLE1BQUssU0FBQ3BCLEdBQzNCLE9BQVFBLEVBQWFTLFNBQVNDLEtBQ2hDLEdBQ0YsSUFBQ1gsRUFBQSwyQkFFb0IsV0FDbkJsQixFQUFLd0MscUJBQ0x4QyxFQUFLc0MsV0FBV3JDLFNBQVEsU0FBQ2tCLEdBQ3ZCQSxFQUFhTixpQkFBaUIsU0FBUyxXQUNyQ2IsRUFBS3lDLG9CQUFvQnRCLEdBQ3pCbkIsRUFBS3dDLG9CQUNQLEdBQ0YsR0FDRixJQUFDdEIsRUFBQSxtQkFFWSxXQUNYbEIsRUFBS3dDLHFCQUNMeEMsRUFBS3NDLFdBQVdyQyxTQUFRLFNBQUNrQixHQUN2Qm5CLEVBQUs4QixnQkFBZ0JYLEVBQ3ZCLEdBQ0YsSUFBQ0QsRUFBQSx5QkFFa0IsV0FDakJsQixFQUFLUyxxQkFDTFQsRUFBS3dDLG9CQUNQLElBbEVFM0UsS0FBS3lELGFBQWVOLEVBQ3BCbkQsS0FBSzRELGNBQWdCUixFQUNyQnBELEtBQUt5RSxXQUFhSSxNQUFNQyxLQUFLM0IsRUFBWTRCLGlCQUFpQi9FLEtBQUs0RCxjQUFjb0IsZ0JBQzdFaEYsS0FBS3FFLGVBQWlCckUsS0FBS3lELGFBQWFyQyxjQUFjcEIsS0FBSzRELGNBQWNxQixxQkFDM0UsSSx1cUJDTm1CQyxFQUFPLFdBQzFCLFNBQUFBLEVBQUF6RixFQUErQjBGLEdBQXFCLElBQXZDQyxFQUFLM0YsRUFBTDJGLE1BQU9DLEVBQVE1RixFQUFSNEYsVSw0RkFBUXRGLENBQUEsS0FBQW1GLEdBQzFCbEYsS0FBS3NGLE9BQVNGLEVBQ2RwRixLQUFLdUYsVUFBWUYsRUFDakJyRixLQUFLd0YsV0FBYTdELFNBQVNQLGNBQWMrRCxFQUMzQyxDLFFBVUMsTyxFQVZBRCxHLEVBQUEsRUFBQXpELElBQUEsVUFBQUMsTUFFRCxTQUFRK0QsR0FDTnpGLEtBQUt3RixXQUFXRSxRQUFRRCxFQUMxQixHQUFDLENBQUFoRSxJQUFBLGNBQUFDLE1BRUQsV0FBYyxJQUFBUyxFQUFBLEtBQ1puQyxLQUFLc0YsT0FBT0ssVUFBVXZELFNBQVEsU0FBQ3FELEdBQzdCdEQsRUFBS29ELFVBQVVFLEVBQ2pCLEdBQ0YsTSxvRUFBQ1AsQ0FBQSxDQWZ5QixHLG16QkNBUFUsRUFBSyxXQUN4QixTQUFBQSxFQUFZQyxHQUFlLElBQUExRCxFQUFBLE0sNEZBQUFwQyxDQUFBLEtBQUE2RixHQUFBdkMsRUFBQSx5QkFrQlIsU0FBQ3lDLEdBQ0YsV0FBWkEsRUFBSXJFLEtBQWtCVSxFQUFLNEQsT0FDakMsSUFBQzFDLEVBQUEsd0JBRWlCLFNBQUN5QyxHQUNiQSxFQUFJRSxPQUFPaEUsVUFBVUUsU0FBUyxVQUFVQyxFQUFLNEQsT0FDbkQsSUF2QkUvRixLQUFLaUcsT0FBU3RFLFNBQVNQLGNBQWN5RSxHQUNyQzdGLEtBQUtrRyxtQkFBcUJsRyxLQUFLaUcsT0FBTzdFLGNBQWMsd0JBQ3BEcEIsS0FBSytGLE1BQVEvRixLQUFLK0YsTUFBTUksS0FBS25HLEtBQy9CLEMsUUEwQkMsTyxFQTFCQTRGLEcsRUFBQSxFQUFBbkUsSUFBQSxPQUFBQyxNQUVELFdBQ0UxQixLQUFLaUcsT0FBT2pFLFVBQVVNLElBQUksZ0JBQzFCWCxTQUFTcUIsaUJBQWlCLFFBQVNoRCxLQUFLb0csaUJBQzFDLEdBQUMsQ0FBQTNFLElBQUEsUUFBQUMsTUFHRCxXQUNFMUIsS0FBS2lHLE9BQU9qRSxVQUFVUSxPQUFPLGdCQUM3QmIsU0FBUzBFLG9CQUFvQixRQUFTckcsS0FBS29HLGlCQUU3QyxHQUFDLENBQUEzRSxJQUFBLG9CQUFBQyxNQVdELFdBQ0UxQixLQUFLa0csbUJBQW1CbEQsaUJBQWlCLFFBQVNoRCxLQUFLK0YsT0FDdkQvRixLQUFLaUcsT0FBT2pELGlCQUFpQixRQUFTaEQsS0FBS3NHLGdCQUM3QyxNLG9FQUFDVixDQUFBLENBL0J1QixHLGd2Q0NBSyxJQUVWVyxFQUFjLFNBQUFDLEkscVJBQUFDLENBQUFGLEVBQUFDLEdBQUEsSSxRQUFBRSxHLEVBQUFILEUscXJCQUNqQyxTQUFBQSxFQUFZVixHQUFlLElBQUExRCxFQUd5QyxPLDRGQUh6Q3BDLENBQUEsS0FBQXdHLElBQ3pCcEUsRUFBQXVFLEVBQUFDLEtBQUEsS0FBTWQsSUFDRGUsWUFBY3pFLEVBQUs4RCxPQUFPN0UsY0FBYyxpQkFDN0NlLEVBQUswRSxjQUFnQjFFLEVBQUs4RCxPQUFPN0UsY0FBYyxtQkFBbUJlLENBQ3BFLENBT0MsTyxFQVBBb0UsRyxFQUFBLEVBQUE5RSxJQUFBLE9BQUFDLE1BRUQsU0FBS3ZCLEVBQU1FLEdBQ1R5RyxFQUFBQyxFQUFBUixFQUFBUyxXQUFBLGFBQUFMLEtBQUEsTUFDQTNHLEtBQUs0RyxZQUFZbEUsSUFBTXJDLEVBQ3ZCTCxLQUFLNEcsWUFBWW5FLElBQU10QyxFQUN2QkgsS0FBSzZHLGNBQWM5RSxZQUFjNUIsQ0FDbkMsTSxvRUFBQ29HLENBQUEsQ0FaZ0MsQ0FBU1gsRyxndkNDRmIsSUFFVnFCLEVBQWEsU0FBQVQsSSxxUkFBQUMsQ0FBQVEsRUFBQVQsR0FBQSxJLFFBQUFFLEcsRUFBQU8sRSxxckJBQ2hDLFNBQUFBLEVBQVlwQixFQUFlcUIsR0FBYyxJQUFBL0UsRUFLK0IsTyw0RkFML0JwQyxDQUFBLEtBQUFrSCxJQUN2QzlFLEVBQUF1RSxFQUFBQyxLQUFBLEtBQU1kLElBQ0RwQyxhQUFldEIsRUFBSzhELE9BQU83RSxjQUFjLGdCQUM5Q2UsRUFBS2dGLGNBQWdCRCxFQUNyQi9FLEVBQUtzQyxXQUFhSSxNQUFNQyxLQUFLM0MsRUFBS3NCLGFBQWFzQixpQkFBaUIsdUJBQ2hFNUMsRUFBS2lGLFFBQVVqRixFQUFLc0IsYUFBYXJDLGNBQWMsdUJBQXVCZSxDQUN4RSxDQThCQyxPLEVBOUJBOEUsRSxFQUFBLEVBQUF4RixJQUFBLGtCQUFBQyxNQUVELFdBQ0UsSUFBTTJGLEVBQWEsQ0FBQyxFQUlwQixPQUhBckgsS0FBS3lFLFdBQVdyQyxTQUFRLFNBQUNrRixHQUN2QkQsRUFBV0MsRUFBTW5ILE1BQVFtSCxFQUFNNUYsS0FDakMsSUFDTzJGLENBQ1QsR0FBQyxDQUFBNUYsSUFBQSxRQUFBQyxNQUVELFdBQ0VvRixFQUFBQyxFQUFBRSxFQUFBRCxXQUFBLGNBQUFMLEtBQUEsTUFDQTNHLEtBQUt5RCxhQUFhOEQsT0FDcEIsR0FBQyxDQUFBOUYsSUFBQSxVQUFBQyxNQUVELFNBQVE4RixFQUFXNUYsR0FFZjVCLEtBQUtvSCxRQUFRckYsWUFEWHlGLEVBQ3lCLGdCQUVBNUYsQ0FFL0IsR0FBQyxDQUFBSCxJQUFBLG9CQUFBQyxNQUVELFdBQW9CLElBQUFxQixFQUFBLEtBQ2xCK0QsRUFBQUMsRUFBQUUsRUFBQUQsV0FBQSwwQkFBQUwsS0FBQSxNQUNBM0csS0FBS3lELGFBQWFULGlCQUFpQixVQUFVLFNBQUM4QyxHQUM1Q0EsRUFBSTJCLGlCQUNKMUUsRUFBS29FLGNBQWNwRSxFQUFLMkUsbUJBQ3hCM0UsRUFBS2dELE9BQ1AsR0FDRixJLHVFQUFDa0IsQ0FBQSxDQXJDK0IsQ0FBU3JCLEcsZ3ZDQ0ZaLElBRVYrQixFQUFXLFNBQUFuQixJLHFSQUFBQyxDQUFBa0IsRUFBQW5CLEdBQUEsSSxRQUFBRSxHLEVBQUFpQixFLHFyQkFDOUIsU0FBQUEsRUFBWUMsRUFBY0MsR0FBd0IsSUFBQTFGLEVBSzVCLE8sNEZBTDRCcEMsQ0FBQSxLQUFBNEgsSUFDaER4RixFQUFBdUUsRUFBQUMsS0FBQSxLQUFNaUIsSUFDREUsTUFBUTNGLEVBQUs4RCxPQUFPN0UsY0FBYyxnQkFDdkNlLEVBQUtpRixRQUFVakYsRUFBSzJGLE1BQU0xRyxjQUFjLHVCQUN4Q2UsRUFBSzRGLHdCQUEwQkYsRUFDL0IxRixFQUFLNkYsVUFBWSxDQUFDLEVBQUU3RixDQUN0QixDQXNCQyxPLEVBdEJBd0YsRyxFQUFBLEVBQUFsRyxJQUFBLE9BQUFDLE1BRUQsU0FBS3VHLEdBQ0huQixFQUFBQyxFQUFBWSxFQUFBWCxXQUFBLGFBQUFMLEtBQUEsTUFDQTNHLEtBQUtnSSxVQUFZQyxDQUNuQixHQUFDLENBQUF4RyxJQUFBLGlCQUFBQyxNQUVELFNBQWU4RixHQUVYeEgsS0FBS29ILFFBQVFyRixZQURYeUYsRUFDeUIsY0FFQSxJQUUvQixHQUFDLENBQUEvRixJQUFBLG9CQUFBQyxNQUVELFdBQW9CLElBQUFxQixFQUFBLEtBQ2xCL0MsS0FBSzhILE1BQU05RSxpQkFBaUIsVUFBVSxTQUFDOEMsR0FDckNBLEVBQUkyQixpQkFDSjFFLEVBQUtnRix3QkFBd0JoRixFQUFLaUYsVUFDcEMsSUFFQWxCLEVBQUFDLEVBQUFZLEVBQUFYLFdBQUEsMEJBQUFMLEtBQUEsS0FDRixNLG9FQUFDZ0IsQ0FBQSxDQTdCNkIsQ0FBUy9CLEcsdXFCQ0ZwQnNDLEVBQVEsV0FDekIsU0FBQUEsRUFBQXpJLEdBQTRELElBQTlDMEksRUFBWTFJLEVBQVowSSxhQUFjQyxFQUFhM0ksRUFBYjJJLGNBQWVDLEVBQWE1SSxFQUFiNEksZSw0RkFBYXRJLENBQUEsS0FBQW1JLEdBQ3REbEksS0FBS3NJLFNBQVczRyxTQUFTUCxjQUFjK0csR0FDdkNuSSxLQUFLdUksVUFBWTVHLFNBQVNQLGNBQWNnSCxHQUN4Q3BJLEtBQUtxSSxjQUFnQjFHLFNBQVNQLGNBQWNpSCxFQUM1QyxDLFFBZ0JDLE8sRUFoQkFILEUsRUFBQSxFQUFBekcsSUFBQSxnQkFBQUMsTUFFRCxTQUFBOEcsR0FBaUMsSUFBakJILEVBQWFHLEVBQWJILGNBQ2RySSxLQUFLcUksY0FBYzNGLElBQU0yRixDQUMzQixHQUFDLENBQUE1RyxJQUFBLGNBQUFDLE1BRUQsV0FDRSxNQUFPLENBQ0x2QixLQUFNSCxLQUFLc0ksU0FBU3ZHLFlBQ3BCMEcsTUFBT3pJLEtBQUt1SSxVQUFVeEcsWUFFMUIsR0FBQyxDQUFBTixJQUFBLGNBQUFDLE1BRUQsU0FBQWdILEdBQXFDLElBQXhCQyxFQUFTRCxFQUFUQyxVQUFXQyxFQUFVRixFQUFWRSxXQUN0QjVJLEtBQUtzSSxTQUFTdkcsWUFBYzRHLEVBQzVCM0ksS0FBS3VJLFVBQVV4RyxZQUFjNkcsQ0FDL0IsSSx1RUFBQ1YsQ0FBQSxDQXJCc0IsRyx1cUJDQVJXLEVBQUcsV0FDcEIsU0FBQUEsRUFBWUMsSSw0RkFBZS9JLENBQUEsS0FBQThJLEdBQ3pCN0ksS0FBSytJLEtBQU9ELEVBQWNFLElBQzFCaEosS0FBS2lKLFNBQVdILEVBQWNJLE9BQ2hDLEMsUUF3RUMsTyxFQXhFQUwsRyxFQUFBLEVBQUFwSCxJQUFBLGVBQUFDLE1BRUQsU0FBYXlILEdBQ1gsT0FBSUEsRUFBSUMsR0FDQ0QsRUFBSUUsT0FFTkMsUUFBUUMsT0FBTyxXQUFEN0YsT0FBWXlGLEVBQUlLLFFBQ3ZDLEdBQUMsQ0FBQS9ILElBQUEsY0FBQUMsTUFFRCxXQUNFLE9BQU8rSCxNQUFNLEdBQUQvRixPQUFJMUQsS0FBSytJLEtBQUksYUFBYSxDQUFFRyxRQUFTbEosS0FBS2lKLFdBQ3JEUyxLQUNDMUosS0FBSzJKLGFBRVQsR0FBQyxDQUFBbEksSUFBQSxjQUFBQyxNQUVELFdBQ0UsT0FBTytILE1BQU0sR0FBRC9GLE9BQUkxRCxLQUFLK0ksS0FBSSxVQUFVLENBQUVHLFFBQVNsSixLQUFLaUosV0FDbERTLEtBQ0MxSixLQUFLMkosYUFFVCxHQUFDLENBQUFsSSxJQUFBLGlCQUFBQyxNQUVELFNBQWVrSSxHQUNiLE9BQU9ILE1BQU0sR0FBRC9GLE9BQUkxRCxLQUFLK0ksS0FBSSxhQUFhLENBQ3BDYyxPQUFRLFFBQ1JYLFFBQVNsSixLQUFLaUosU0FDZGEsS0FBTUMsS0FBS0MsVUFBVSxDQUFFN0osS0FBTXlKLEVBQUt6SixLQUFNc0ksTUFBT21CLEVBQUtuQixVQUVyRGlCLEtBQUsxSixLQUFLMkosYUFDYixHQUFDLENBQUFsSSxJQUFBLGFBQUFDLE1BRUQsU0FBV3VJLEdBQ1QsT0FBT1IsTUFBTSxHQUFEL0YsT0FBSTFELEtBQUsrSSxLQUFJLFVBQVUsQ0FDakNjLE9BQVEsT0FDUlgsUUFBU2xKLEtBQUtpSixTQUNkYSxLQUFNQyxLQUFLQyxVQUFVQyxLQUV0QlAsS0FBSzFKLEtBQUsySixhQUNiLEdBQUMsQ0FBQWxJLElBQUEsYUFBQUMsTUFFRCxTQUFXaUMsR0FDVCxPQUFPOEYsTUFBTSxHQUFEL0YsT0FBSTFELEtBQUsrSSxLQUFJLFdBQUFyRixPQUFVQyxHQUFNLENBQ3ZDa0csT0FBUSxTQUNSWCxRQUFTbEosS0FBS2lKLFdBRWZTLEtBQUsxSixLQUFLMkosYUFDYixHQUFDLENBQUFsSSxJQUFBLFVBQUFDLE1BRUQsU0FBUWlDLEdBQ04sT0FBTzhGLE1BQU0sR0FBRC9GLE9BQUkxRCxLQUFLK0ksS0FBSSxXQUFBckYsT0FBVUMsRUFBRSxVQUFVLENBQzdDa0csT0FBUSxNQUNSWCxRQUFTbEosS0FBS2lKLFdBRWZTLEtBQUsxSixLQUFLMkosYUFDYixHQUFDLENBQUFsSSxJQUFBLGFBQUFDLE1BRUQsU0FBV2lDLEdBQ1QsT0FBTzhGLE1BQU0sR0FBRC9GLE9BQUkxRCxLQUFLK0ksS0FBSSxXQUFBckYsT0FBVUMsRUFBRSxVQUFVLENBQzdDa0csT0FBUSxTQUNSWCxRQUFTbEosS0FBS2lKLFdBRWZTLEtBQUsxSixLQUFLMkosYUFDYixHQUFDLENBQUFsSSxJQUFBLG1CQUFBQyxNQUVELFNBQWlCa0ksR0FDZixPQUFPSCxNQUFNLEdBQUQvRixPQUFJMUQsS0FBSytJLEtBQUksb0JBQW9CLENBQzNDRyxRQUFTbEosS0FBS2lKLFNBQ2RZLE9BQVEsUUFDUkMsS0FBTUMsS0FBS0MsVUFBVUosS0FFdEJGLEtBQUsxSixLQUFLMkosYUFDYixNLG9FQUFDZCxDQUFBLENBNUVtQixHQ0FYakgsRUFBVUQsU0FBU1AsY0FBYyxZQUNqQzhJLEVBQWtCdEksRUFBUVIsY0FBYyxvQkFDeEMrSSxFQUFxQnhJLFNBQVNQLGNBQWMseUJBSzVDZ0osR0FKY3hJLEVBQVFSLGNBQWMsa0JBQ2ZRLEVBQVFSLGNBQWMseUJBRTNCTyxTQUFTUCxjQUFjLG9CQUN6Qk8sU0FBU1AsY0FBYyx1QkFFckNpSixHQURjRCxFQUFZaEosY0FBYyxrQ0FDM0JnSixFQUFZaEosY0FBYyx3QkFFdkNrSixFQUFlM0ksU0FBU1AsY0FBYyw0QkFFdENtSixHQURvQkQsRUFBYWxKLGNBQWMsd0JBQzdCa0osRUFBYWxKLGNBQWMseUJBQzdDdUgsRUFBWTJCLEVBQWFsSixjQUFjLGdDQUN2Q3dILEVBQWEwQixFQUFhbEosY0FBYyxpQ0FFeENvSixFQUFZN0ksU0FBU1AsY0FBYyx3QkFJbkNxSixHQUhpQkQsRUFBVXBKLGNBQWMsd0JBQ2xDb0osRUFBVXBKLGNBQWMsaUNBQ2xCb0osRUFBVXBKLGNBQWMsZ0NBQzFCb0osRUFBVXBKLGNBQWMsc0JBS25Dc0osR0FIaUIvSSxTQUFTUCxjQUFjLHlCQUNIQSxjQUFjLHdCQUVuQ08sU0FBU1AsY0FBYyw2QkFhdkN1SixHQVpnQmhKLFNBQVNQLGNBQWMsWUFDMUJPLFNBQVNQLGNBQWMsaUJBQ3JCTyxTQUFTUCxjQUFjLG1CQVVuQixDQUM1QndKLGFBQWMsZUFDZDVGLGNBQWUscUJBQ2ZDLHFCQUFzQixzQkFDdEJWLG9CQUFxQiw4QkFDckJWLGdCQUFpQiwwQkFDakJDLFdBQVksOEIsMkdDckJoQixJQUFNK0csR0FBZ0IsSUFBSTVILEVBQWN3SCxFQUFVRSxHQUNsREUsR0FBY0MsbUJBRWQsSUFBTUMsR0FBbUIsSUFBSTlILEVBQWNzSCxFQUFpQkksR0FDNURJLEdBQWlCRCxtQkFFakIsSUFBTUUsR0FBa0IsSUFBSS9ILEVBQWNvSCxFQUFZTSxHQUN0REssR0FBZ0JGLG1CQUVoQixJQUFNRyxHQUFVLElBQUkvRixFQUFRLENBQzFCRyxTQUFVLFNBQUNJLEdBQVd3RixHQUFRQyxRQUFRQyxHQUFXMUYsR0FBUSxHQUN4RCxZQUtHNkUsR0FBZSxJQUFJckQsRUFBYyw0QkFBNEIsU0FBQ21FLEdBQ2xFZCxHQUFhZSxTQUFRLEdBQ3JCQyxHQUNHQyxlQUFlSCxHQUNmMUIsTUFBSyxTQUFDUCxHQUNMcUMsR0FBU0MsWUFBWXRDLEdBQ3JCbUIsR0FBYXZFLE9BQ2YsSUFDQzJGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDRyxTQUFRLFdBQ1B4QixHQUFhZSxTQUFRLEVBQU8sWUFDOUIsR0FDSixJQUNBZixHQUFheUIsb0JBRWIsSUFBTTNCLEdBQWMsSUFBSW5ELEVBQWMsc0JBQXNCLFNBQUNtRSxHQUMzRGhCLEdBQVlpQixTQUFRLEdBQ3BCQyxHQUNHVSxpQkFBaUJaLEdBQ2pCMUIsTUFBSyxTQUFDUCxHQUNMcUMsR0FBU1MsY0FBYzlDLEdBQ3ZCaUIsR0FBWXJFLE9BQ2QsSUFDQzJGLE9BQU0sU0FBQ0MsR0FDTkMsUUFBUUMsSUFBSUYsRUFDZCxJQUNDRyxTQUFRLFdBQ1AxQixHQUFZaUIsU0FBUSxFQUFPLFdBQzdCLEdBQ0osSUFDQWpCLEdBQVkyQixvQkFFWixJQUFNRyxHQUFpQixJQUFJM0YsRUFBZSx5QkFDMUMyRixHQUFlSCxvQkFLZixJQUFNSSxHQUFhLElBQUlsRixFQUFjLHdCQUF3QixTQUFDZ0QsR0FDNURPLFVBQVVhLFNBQVEsR0FDbEJDLEdBQ0djLFdBQVduQyxHQUNYUCxNQUFLLFNBQUNQLEdBQ0wsSUFBTWtELEVBQWNsQixHQUFXaEMsR0FDL0I4QixHQUFRQyxRQUFRbUIsR0FDaEJGLEdBQVdwRyxPQUNiLElBQ0MyRixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsSUFDQ0csU0FBUSxXQUNQSyxHQUFXZCxTQUFRLEVBQU8sVUFDNUIsR0FDSixJQUNBYyxHQUFXSixvQkFFWCxJQUFNTyxHQUFrQixJQUFJM0UsRUFBWSxzQkFBc0IsU0FBQ00sR0FDN0RxRSxHQUFnQkMsZ0JBQWUsR0FDL0JqQixHQUNHa0IsV0FBV3ZFLEVBQUt3RSxhQUNoQi9DLE1BQUssV0FDSnpCLEVBQUt1RSxhQUNMRixHQUFnQnZHLE9BQ2xCLElBQ0MyRixPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsSUFDQ0csU0FBUSxXQUNQUSxHQUFnQkMsZ0JBQWUsRUFDakMsR0FDSixJQUVNZixHQUFXLElBQUl0RCxFQUFTLENBQzVCQyxhQUFjLGlCQUNkdUUsYUFBYyx3QkFDZHJFLGNBQWUscUJBT1hpRCxHQUFNLElBQUl6QyxFRDdGYSxDQUN6QkcsSUFBSyw4Q0FDTEUsUUFBUyxDQUNQLGVBQWdCLG1CQUNoQnlELGNBQWUsMENDMkZyQnJELFFBQVFzRCxJQUFJLENBQUN0QixHQUFJdUIsY0FBZXZCLEdBQUl3QixnQkFDakNwRCxNQUFLLFNBQUFqSyxHQUEyQixJLElBQUErSSxHLEVBQUEsRSw0Q0FBQS9JLEksczJCQUF6QjJMLEVBQVE1QyxFQUFBLEdBQUV1RSxFQUFTdkUsRUFBQSxHQUN6QjdJLE9BQVN5TCxFQUFTN0ssSUFDbEJpTCxHQUFTQyxZQUFZTCxHQUNyQkksR0FBU1MsY0FBY2IsR0FDdkJILEdBQVErQixZQUFZRCxFQUN0QixJQUNDckIsT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLElBRUEsSUFBTVIsR0FBYSxTQUFDMUYsR0FDbEIsSUFBTXdILEVBQVUsSUFBSXpOLEVBQ2xCLENBQ0VBLEtBQU1pRyxFQUNOOUYsT0FDQUMsZ0JBQWlCLFNBQUNPLEVBQU1FLEdBQ3RCNkwsR0FBZWdCLEtBQUsvTSxFQUFNRSxFQUM1QixFQUNBUixnQkFBaUIsV0FDWG9OLEVBQVFFLFNBQ1Y3QixHQUNHOEIsV0FBV0gsRUFBUVIsYUFDbkIvQyxNQUFLLFNBQUNQLEdBQ0w4RCxFQUFRSSxTQUFTbEUsRUFBSTFJLEtBQUtrQyxPQUM1QixJQUNDK0ksT0FBTSxTQUFDQyxHQUNOQyxRQUFRQyxJQUFJRixFQUNkLElBRUZMLEdBQ0dnQyxRQUFRTCxFQUFRUixhQUNoQi9DLE1BQUssU0FBQ1AsR0FDTDhELEVBQVFJLFNBQVNsRSxFQUFJMUksS0FBS2tDLE9BQzVCLElBQ0MrSSxPQUFNLFNBQUNDLEdBQ05DLFFBQVFDLElBQUlGLEVBQ2QsR0FFTixFQUNBN0wsaUJBQWtCLFdBQ2hCd00sR0FBZ0JZLEtBQUtELEVBQ3ZCLEdBRUYscUJBR0YsT0FEa0JBLEVBQVFNLGNBRTVCLEVBRUZyRCxFQUFnQmxILGlCQUFpQixTQUFTLFdBQ3hDc0gsR0FBYTRDLE9BQ2IsSUFBTU0sRUFBT2hDLEdBQVNxQixjQUN0QmxFLEVBQVVqSCxNQUFROEwsRUFBS3JOLEtBQ3ZCeUksRUFBV2xILE1BQVE4TCxFQUFLL0UsTUFDeEJzQyxHQUFpQjBDLFlBQ25CLElBRUEvQyxFQUFjMUgsaUJBQWlCLFNBQVMsV0FDdENtSixHQUFXZSxPQUNYckMsR0FBYzRDLFlBQ2hCLElBRUF0RCxFQUFtQm5ILGlCQUFpQixTQUFTLFdBQzNDZ0ksR0FBZ0J5QyxhQUNoQnJELEdBQVk4QyxNQUNkLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cE5vdGljZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL3V0aWxzL2NvbnN0YW5zdC5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKHsgQ2FyZCwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUxpa2VDbGljaywgaGFuZGxlRGVsZXRlQ2FyZCB9LFxyXG4gICAgdGVtcGxhdGVTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fQ2FyZCA9IENhcmQ7XHJcbiAgICB0aGlzLl9uYW1lID0gQ2FyZC5uYW1lO1xyXG4gICAgdGhpcy5fbGluayA9IENhcmQubGluaztcclxuICAgIHRoaXMuX2NhcmRJZCA9IENhcmQuX2lkO1xyXG4gICAgdGhpcy5fbGlrZSA9IENhcmQubGlrZTtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2lzT3duZXIgPSBDYXJkLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19idXR0b24tZGVsZXRlJyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2J1dHRvbi1saWtlJyk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19pbWFnZScpO1xyXG4gICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190aXRsZScpO1xyXG4gICAgdGhpcy5fbGlrZU51bWJlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19saWtlLW51bWJlclwiKTtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5nYWxsZXJ5X19lbGVtZW50XCIpLmNsb25lTm9kZSh0cnVlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNvdW50KSB7XHJcbiAgICB0aGlzLl9saWtlID0gdGhpcy5fQ2FyZC5saWtlO1xyXG4gICAgdGhpcy5fbGlrZU51bWJlci50ZXh0Q29udGVudCA9IGNvdW50O1xyXG4gICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoXCJnYWxsZXJ5X19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBzaG93TGlrZSgpIHtcclxuICAgIHRoaXMuX2xpa2UuZm9yRWFjaCgoZWwpID0+IHtcclxuICAgICAgaWYgKGVsLl9pZCA9PT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LmFkZChcImdhbGxlcnlfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBoaWRkZW5UcmFzaCgpIHtcclxuICAgIHRoaXMuaXNNeUNhcmQgPSB0aGlzLl91c2VySWQgPT09IHRoaXMuX2lzT3duZXI7XHJcbiAgICBpZiAoIXRoaXMuaXNNeUNhcmQpIHtcclxuICAgICAgdGhpcy5fZGVsZXRlQ2FyZC5jbGFzc0xpc3QudG9nZ2xlKFwiZ2FsbGVyeV9fYnV0dG9uLWRlbGV0ZV9oaWRkZW5cIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZElkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRJZDtcclxuICB9XHJcblxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fbGlrZU51bWJlci50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2UubGVuZ3RoO1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuaGlkZGVuVHJhc2goKTtcclxuICAgIHRoaXMuc2hvd0xpa2UoKTtcclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZSgnZ2FsbGVyeV9fYnV0dG9uLWxpa2VfYWN0aXZlJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGZvcm1FbGVtZW50LCBsaXN0U2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XHJcbiAgICB0aGlzLl9saXN0U2VsZWN0b3IgPSBsaXN0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2xpc3RTZWxlY3Rvci5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBfc2hvd0lucHV0RXJyb3IgPSAoaW5wdXRFbGVtZW50LCBlcnJvck1lc3NhZ2UpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmVycm9yQ2xhc3MpO1xyXG4gIH07XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xpc3RTZWxlY3Rvci5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gJyc7XHJcbiAgfTtcclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eSA9IChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCwgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSA9ICgpID0+IHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnNldEF0dHJpYnV0ZSgnZGlzYWJsZWQnLCB0cnVlKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZSgnZGlzYWJsZWQnKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfaGFzSW52YWxpZElucHV0ID0gKCkgPT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XHJcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICByZXNldFZhbGlkID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24gPSAoKSA9PiB7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9O1xyXG59XHJcblxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7aXRlbXMsIHJlbmRlcmVyfSwgY29udGFpbnRlclNlbGVjdG9yICkge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW50ZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cFByb2ZpbGVDbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1jbG9zZVwiKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NhcGVLZXkpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NhcGVLZXkpO1xyXG5cclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVLZXkgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2Nsb3NlQnlPdmVybGF5ID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcblxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwUHJvZmlsZUNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlQnlPdmVybGF5KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1bWJpdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdW1iaXQgPSBoYW5kbGVTdW1iaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIikpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uLXNhdmVcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBsb2FkaW5nKGlzTG9hZGluZywgY29udGVudCkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VtYml0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwTm90aWNlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZXRvciwgaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxldG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1zYXZlJyk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVGb3JtU3VibWl0ID0gaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2NhcmRJbmZvID0ge307XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmRJbmZvID0gY2FyZDtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdDb25maXJtKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcItCj0LTQsNC70LXQvdC40LUuLi5cIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gXCLQlNCwXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQodGhpcy5fY2FyZEluZm8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgcHJvZmlsZUF2YXRhciB9KSB7XHJcbiAgICAgIHRoaXMudXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgIHRoaXMudXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0VXNlckF2YXRhcih7IHByb2ZpbGVBdmF0YXIgfSkge1xyXG4gICAgICAgIHRoaXMucHJvZmlsZUF2YXRhci5zcmMgPSBwcm9maWxlQXZhdGFyO1xyXG4gICAgICB9XHJcblxyXG4gICAgICBnZXRVc2VySW5mbygpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgbmFtZTogdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgICAgIGFib3V0OiB0aGlzLnVzZXJBYm91dC50ZXh0Q29udGVudCxcclxuICAgICAgICB9O1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICBzZXRVc2VySW5mbyh7aW5wdXROYW1lLCBpbnB1dEFib3V0fSkge1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSBpbnB1dE5hbWU7XHJcbiAgICAgICAgdGhpcy51c2VyQWJvdXQudGV4dENvbnRlbnQgPSBpbnB1dEFib3V0O1xyXG4gICAgICB9XHJcbiAgICB9IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwaVBhcmFtZXRlcnMpIHtcclxuICAgICAgdGhpcy5fdXJsID0gYXBpUGFyYW1ldGVycy51cmw7XHJcbiAgICAgIHRoaXMuX2hlYWRlcnMgPSBhcGlQYXJhbWV0ZXJzLmhlYWRlcnM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFuZGxlUmVwbHkocmVzKSB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNCe0YjQuNCx0LrQsDogJHtyZXMuc3RhdHVzfWApO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXHJcbiAgICAgIC50aGVuKFxyXG4gICAgICAgIHRoaXMuX2hhbmRsZVJlcGx5XHJcbiAgICAgICk7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBnZXRBbGxDYXJkcygpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7IGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMgfSlcclxuICAgICAgLnRoZW4oXHJcbiAgICAgICAgdGhpcy5faGFuZGxlUmVwbHlcclxuICAgICAgKTtcclxuICAgIH1cclxuICBcclxuICAgIHVwZGF0ZVVzZXJJbmZvKGRhdGEpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IGRhdGEubmFtZSwgYWJvdXQ6IGRhdGEuYWJvdXQgfSksXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHRoaXMuX2hhbmRsZVJlcGx5KTtcclxuICAgIH1cclxuICBcclxuICAgIGFkZE5ld0NhcmQoY2FyZERhdGEpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGNhcmREYXRhKSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVwbHkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVwbHkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgc2V0TGlrZShpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUFVUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVwbHkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgZGVsZXRlTGlrZShpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfS9saWtlc2AsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4odGhpcy5faGFuZGxlUmVwbHkpO1xyXG4gICAgfVxyXG4gIFxyXG4gICAgdXBkYXRlVXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbih0aGlzLl9oYW5kbGVSZXBseSk7XHJcbiAgICB9XHJcbiAgfSIsImV4cG9ydCBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVfX2J1dHRvbiA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZV9CdXR0b25FZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbi1lZGl0Jyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlTmFtZSA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2Rlc2NyaXB0aW9uJyk7XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX2RhdGFfYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFySW5wdXQgPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfYXZhdGFyXCIpO1xyXG5leHBvcnQgY29uc3QgYXZhdGFyRm9ybSA9IHBvcHVwQXZhdGFyLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm0tYXZhdGFyXCIpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kYXRhX3Byb2ZpbGUtZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBQcm9maWxlQ2xvc2UgPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKTtcclxuZXhwb3J0IGNvbnN0IGZvcm1FZGl0UHJvZmlsZSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcjcG9wdXBfX2Zvcm0tcHJvZmlsZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXROYW1lID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1pbnB1dF9kYXRhX25hbWUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0QWJvdXQgPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfYWJvdXQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZGF0YV9jYXJkLWFkZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkQ2xvc2UgPSBwb3B1cENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19idXR0b24tY2xvc2UnKTtcclxuZXhwb3J0IGNvbnN0IG5hbWUgPSBwb3B1cENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfdGl0bGUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0SW1hZ2UgPSBwb3B1cENhcmQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfbGluaycpO1xyXG5leHBvcnQgY29uc3QgY2FyZEZvcm0gPSBwb3B1cENhcmQucXVlcnlTZWxlY3RvcignI3BvcHVwX19mb3JtLWNhcmQnKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kYXRhX2ltYWdlLWFkZCcpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkSW1hZ2VDbG9zZSA9IHBvcHVwQ2FyZEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcblxyXG5leHBvcnQgY29uc3QgYnV0dG9uQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tYWRkQ2FyZCcpO1xyXG5leHBvcnQgY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5Jyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cEltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWFnZScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBDYXB0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XHJcblxyXG5leHBvcnQgY29uc3QgYXBpUGFyYW1ldGVycyA9IHtcclxuICAgIHVybDogXCJodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTYyXCIsXHJcbiAgICBoZWFkZXJzOiB7XHJcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gICAgICBhdXRob3JpemF0aW9uOiBcIjk0YzVmOTdmLWI4Y2QtNDgzOC04YzRjLWJmMjYwNThiYTZkMFwiLFxyXG4gICAgfSxcclxuICB9O1xyXG5cclxuZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25Db25maWcgPSB7XHJcbiAgICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxyXG4gICAgaW5wdXRTZWxlY3RvcjogJy5wb3B1cF9fZm9ybS1pbnB1dCcsXHJcbiAgICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fYnV0dG9uLXNhdmUnLFxyXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19idXR0b24tc2F2ZV9pbmFjdGl2ZScsXHJcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fZm9ybS1pbnB1dF9lcnJvcicsXHJcbiAgICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX2FjdGl2ZScsXHJcbn07IiwiaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBOb3RpY2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBOb3RpY2UuanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgcHJvZmlsZV9fYnV0dG9uLFxyXG4gIHByb2ZpbGVfQnV0dG9uRWRpdCxcclxuICBmb3JtRWRpdFByb2ZpbGUsXHJcbiAgaW5wdXROYW1lLFxyXG4gIGlucHV0QWJvdXQsXHJcbiAgYXZhdGFySW5wdXQsXHJcbiAgY2FyZEZvcm0sXHJcbiAgYnV0dG9uQWRkQ2FyZCxcclxuICB2YWxpZGF0aW9uQ29uZmlnLFxyXG4gIGFwaVBhcmFtZXRlcnMsXHJcbiAgYXZhdGFyRm9ybVxyXG59XHJcbiAgZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW5zdC5qc1wiO1xyXG5cclxuY29uc3QgY2FyZFZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNhcmRGb3JtLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuY2FyZFZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBwcm9maWxlVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoZm9ybUVkaXRQcm9maWxlLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxucHJvZmlsZVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5jb25zdCBhdmF0YXJWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihhdmF0YXJGb3JtLCB2YWxpZGF0aW9uQ29uZmlnKTtcclxuYXZhdGFyVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbih7XHJcbiAgcmVuZGVyZXI6IChpdGVtKSA9PiB7IHNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTsgfSxcclxufSwgXCIuZ2FsbGVyeVwiKTtcclxuXHJcbi8vY29uc3QgcG9wdXBQcm9maWxlID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZGF0YV9wcm9maWxlLWVkaXRcIiwgc3VibWl0RWRpdFByb2ZpbGVGb3JtKTtcclxuLy9wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2RhdGFfcHJvZmlsZS1lZGl0XCIsICh1c2VyRGF0YSkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5sb2FkaW5nKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLnVwZGF0ZVVzZXJJbmZvKHVzZXJEYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VySW5mbyhyZXMpO1xyXG4gICAgICBwb3B1cFByb2ZpbGUuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBQcm9maWxlLmxvYWRpbmcoZmFsc2UsIFwi0KHQvtGF0YDQsNC90LjRgtGMXCIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wb3B1cFByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZGF0YV9hdmF0YXJcIiwgKHVzZXJEYXRhKSA9PiB7XHJcbiAgcG9wdXBBdmF0YXIubG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VyQXZhdGFyKHVzZXJEYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcyk7XHJcbiAgICAgIHBvcHVwQXZhdGFyLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwQXZhdGFyLmxvYWRpbmcoZmFsc2UsIFwi0J7QsdC90L7QstC40YLRjFwiKTtcclxuICAgIH0pO1xyXG59KTtcclxucG9wdXBBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwV2l0aEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiLnBvcHVwX2RhdGFfaW1hZ2UtYWRkXCIpO1xyXG5wb3B1cFdpdGhJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy9jb25zdCBwb3B1cENhcmRzID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfZGF0YV9jYXJkLWFkZFwiLCBoYW5kbGVDYXJkRm9ybVN1Ym1pdCk7XHJcbi8vcG9wdXBDYXJkcy5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuY29uc3QgcG9wdXBDYXJkcyA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2RhdGFfY2FyZC1hZGRcIiwgKGNhcmREYXRhKSA9PiB7XHJcbiAgcG9wdXBDYXJkLmxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZChjYXJkRGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKHJlcyk7XHJcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XHJcbiAgICAgIHBvcHVwQ2FyZHMuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBDYXJkcy5sb2FkaW5nKGZhbHNlLCBcItCh0L7Qt9C00LDRgtGMXCIpO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5wb3B1cENhcmRzLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBOb3RpY2UoXCIucG9wdXBfZGF0YV9kZWxldGVcIiwgKGNhcmQpID0+IHtcclxuICBwb3B1cENhcmREZWxldGUubG9hZGluZ0NvbmZpcm0odHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChjYXJkLmdldENhcmRJZCgpKVxyXG4gICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICBjYXJkLmRlbGV0ZUNhcmQoKTtcclxuICAgICAgcG9wdXBDYXJkRGVsZXRlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwQ2FyZERlbGV0ZS5sb2FkaW5nQ29uZmlybShmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcblxyXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XHJcbiAgbmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgaW5mb1NlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHByb2ZpbGVBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbi8vY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKG5hbWUsIGxpbmspID0+IHtcclxuLy8gcG9wdXBXaXRoSW1hZ2Uub3BlbihuYW1lLCBsaW5rKTtcclxuLy99XHJcblxyXG5jb25zdCBhcGkgPSBuZXcgQXBpKGFwaVBhcmFtZXRlcnMpO1xyXG5cclxuUHJvbWlzZS5hbGwoW2FwaS5nZXRVc2VySW5mbygpLCBhcGkuZ2V0QWxsQ2FyZHMoKV0pXHJcbiAgLnRoZW4oKFt1c2VyRGF0YSwgY2FyZEl0ZW1zXSkgPT4ge1xyXG4gICAgdXNlcklkID0gdXNlckRhdGEuX2lkO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8odXNlckRhdGEpO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih1c2VyRGF0YSk7XHJcbiAgICBzZWN0aW9uLnJlbmRlckl0ZW1zKGNhcmRJdGVtcyk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuXHJcbiAgY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgICBjb25zdCBjYXJkTmV3ID0gbmV3IENhcmQoXHJcbiAgICAgIHtcclxuICAgICAgICBDYXJkOiBpdGVtLFxyXG4gICAgICAgIHVzZXJJZDogdXNlcklkLFxyXG4gICAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcclxuICAgICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBoYW5kbGVMaWtlQ2xpY2s6ICgpID0+IHtcclxuICAgICAgICAgIGlmIChjYXJkTmV3LmlzTGlrZSgpKSB7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5kZWxldGVMaWtlKGNhcmROZXcuZ2V0Q2FyZElkKCkpXHJcbiAgICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2FyZE5ldy5saWtlQ2FyZChyZXMubGlrZS5sZW5ndGgpO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgICAuc2V0TGlrZShjYXJkTmV3LmdldENhcmRJZCgpKVxyXG4gICAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICAgIGNhcmROZXcubGlrZUNhcmQocmVzLmxpa2UubGVuZ3RoKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgaGFuZGxlRGVsZXRlQ2FyZDogKCkgPT4ge1xyXG4gICAgICAgICAgcG9wdXBDYXJkRGVsZXRlLm9wZW4oY2FyZE5ldyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgfSxcclxuICAgICAgXCIuZ2FsbGVyeS10ZW1wbGF0ZVwiXHJcbiAgICApO1xyXG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY2FyZE5ldy5nZW5lcmF0ZUNhcmQoKTtcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9O1xyXG5cclxucHJvZmlsZV9fYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIHBvcHVwUHJvZmlsZS5vcGVuKCk7XHJcbiAgY29uc3QgaW5mbyA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgaW5wdXROYW1lLnZhbHVlID0gaW5mby5uYW1lO1xyXG4gIGlucHV0QWJvdXQudmFsdWUgPSBpbmZvLmFib3V0O1xyXG4gIHByb2ZpbGVWYWxpZGF0b3IucmVzZXRWYWxpZCgpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBDYXJkcy5vcGVuKCk7XHJcbiAgY2FyZFZhbGlkYXRvci5yZXNldFZhbGlkKCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZV9CdXR0b25FZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWQoKTtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbn0pO1xyXG5cclxuLy9mdW5jdGlvbiBzdWJtaXRFZGl0UHJvZmlsZUZvcm0oZGF0YSkge1xyXG4gLy8gdXNlckluZm8uc2V0VXNlckluZm8oZGF0YSk7XHJcbi8vfVxyXG5cclxuLy9mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmQpIHtcclxuIC8vIGNvbnN0IGNhcmROZXcgPSBuZXcgQ2FyZChjYXJkLCAnLmdhbGxlcnktdGVtcGxhdGUnLCBoYW5kbGVDYXJkQ2xpY2spO1xyXG4gLy8gcmV0dXJuIGNhcmROZXcuZ2VuZXJhdGVDYXJkKCk7XHJcbi8vfVxyXG5cclxuLy9mdW5jdGlvbiBoYW5kbGVDYXJkRm9ybVN1Ym1pdChjYXJkTmV3KSB7XHJcbiAvLyBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChjYXJkTmV3KSk7XHJcbi8vfVxyXG5cclxuLy9zZWN0aW9uLnJlbmRlckl0ZW1zKCk7Il0sIm5hbWVzIjpbIkNhcmQiLCJfcmVmIiwidGVtcGxhdGVTZWxlY3RvciIsInVzZXJJZCIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZUxpa2VDbGljayIsImhhbmRsZURlbGV0ZUNhcmQiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX0NhcmQiLCJfbmFtZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZElkIiwiX2lkIiwiX2xpa2UiLCJsaWtlIiwiX3VzZXJJZCIsIl9pc093bmVyIiwib3duZXIiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9oYW5kbGVEZWxldGVDYXJkIiwiX3RlbXBsYXRlU2VsZWN0b3IiLCJfZWxlbWVudCIsIl9nZXRUZW1wbGF0ZSIsIl9kZWxldGVDYXJkIiwicXVlcnlTZWxlY3RvciIsIl9jYXJkTGlrZSIsIl9jYXJkSW1hZ2UiLCJfY2FyZE5hbWUiLCJfbGlrZU51bWJlciIsImtleSIsInZhbHVlIiwiZG9jdW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY291bnQiLCJ0ZXh0Q29udGVudCIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImNvbnRhaW5zIiwiX3RoaXMiLCJmb3JFYWNoIiwiZWwiLCJhZGQiLCJpc015Q2FyZCIsInJlbW92ZSIsImFsdCIsInNyYyIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsImhpZGRlblRyYXNoIiwic2hvd0xpa2UiLCJfdGhpczIiLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsIl9jcmVhdGVDbGFzcyIsImZvcm1FbGVtZW50IiwibGlzdFNlbGVjdG9yIiwiX2RlZmluZVByb3BlcnR5IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiZXJyb3JFbGVtZW50IiwiX2Zvcm1FbGVtZW50IiwiY29uY2F0IiwiaWQiLCJfbGlzdFNlbGVjdG9yIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfYnV0dG9uRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJfaW5wdXRMaXN0Iiwic29tZSIsIl90b2dnbGVCdXR0b25TdGF0ZSIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiU2VjdGlvbiIsImNvbnRhaW50ZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsInByZXBlbmQiLCJyZXZlcnNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJfcG9wdXAiLCJfcG9wdXBQcm9maWxlQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUVzY2FwZUtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VCeU92ZXJsYXkiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1bWJpdCIsIl9oYW5kbGVTdW1iaXQiLCJfYnV0dG9uIiwiZm9ybVZhbHVlcyIsImlucHV0IiwicmVzZXQiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwTm90aWNlIiwicG9wdXBTZWxldG9yIiwiaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQiLCJfY2FyZEluZm8iLCJjYXJkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwicHJvZmlsZUF2YXRhciIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiX3JlZjIiLCJhYm91dCIsIl9yZWYzIiwiaW5wdXROYW1lIiwiaW5wdXRBYm91dCIsIkFwaSIsImFwaVBhcmFtZXRlcnMiLCJfdXJsIiwidXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9oYW5kbGVSZXBseSIsImRhdGEiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImNhcmREYXRhIiwicHJvZmlsZV9fYnV0dG9uIiwicHJvZmlsZV9CdXR0b25FZGl0IiwicG9wdXBBdmF0YXIiLCJhdmF0YXJGb3JtIiwicG9wdXBQcm9maWxlIiwiZm9ybUVkaXRQcm9maWxlIiwicG9wdXBDYXJkIiwiY2FyZEZvcm0iLCJidXR0b25BZGRDYXJkIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImNhcmRWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZVZhbGlkYXRvciIsImF2YXRhclZhbGlkYXRvciIsInNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInVzZXJEYXRhIiwibG9hZGluZyIsImFwaSIsInVwZGF0ZVVzZXJJbmZvIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsInVwZGF0ZVVzZXJBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwicG9wdXBXaXRoSW1hZ2UiLCJwb3B1cENhcmRzIiwiYWRkTmV3Q2FyZCIsImNhcmRFbGVtZW50IiwicG9wdXBDYXJkRGVsZXRlIiwibG9hZGluZ0NvbmZpcm0iLCJkZWxldGVDYXJkIiwiZ2V0Q2FyZElkIiwiaW5mb1NlbGVjdG9yIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0QWxsQ2FyZHMiLCJjYXJkSXRlbXMiLCJyZW5kZXJJdGVtcyIsImNhcmROZXciLCJvcGVuIiwiaXNMaWtlIiwiZGVsZXRlTGlrZSIsImxpa2VDYXJkIiwic2V0TGlrZSIsImdlbmVyYXRlQ2FyZCIsImluZm8iLCJyZXNldFZhbGlkIl0sInNvdXJjZVJvb3QiOiIifQ==
(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t,r){var n=t.data,o=t.userId,i=t.handleCardClick,u=t.handleLikeClick,a=t.handleDeleteCard;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._data=n,this._name=n.name,this._link=n.link,this._cardId=n._id,this._likes=n.likes,this._userId=o,this._isOwner=n.owner._id,this._handleCardClick=i,this._handleLikeClick=u,this._handleDeleteCard=a,this._templateSelector=r,this._element=this._getTemplate(),this._deleteCard=this._element.querySelector(".gallery__button-delete"),this._cardLike=this._element.querySelector(".gallery__button-like"),this._cardImage=this._element.querySelector(".gallery__image"),this._cardName=this._element.querySelector(".gallery__title"),this._likeNumber=this._element.querySelector(".gallery__like-number")}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.querySelector(".gallery__element").cloneNode(!0)}},{key:"likeCard",value:function(e){this._likes=this._data.likes,this._likeNumber.textContent=e,this._cardLike.classList.toggle("gallery__button-like_active")}},{key:"isLike",value:function(){return this._cardLike.classList.contains("gallery__button-like_active")}},{key:"showLike",value:function(){var e=this;this._likes.forEach((function(t){t._id===e._userId&&e._cardLike.classList.add("gallery__button-like_active")}))}},{key:"hiddenTrash",value:function(){this.isMyCard=this._userId===this._isOwner,this.isMyCard||this._deleteCard.classList.toggle("gallery__button-delete_hidden")}},{key:"deleteCard",value:function(){this._element.remove(),this._element=null}},{key:"getCardId",value:function(){return this._cardId}},{key:"generateCard",value:function(){return this._cardName.textContent=this._name,this._cardImage.alt=this._name,this._cardImage.src=this._link,this._likeNumber.textContent=this._likes.length,this._setEventListeners(),this.hiddenTrash(),this.showLike(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._deleteCard.addEventListener("click",(function(){e._element.remove()})),this._cardLike.addEventListener("click",(function(){e._cardLike.classList.toggle("gallery__button-like_active")})),this._cardImage.addEventListener("click",(function(){e._handleCardClick(e._name,e._link)}))}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e,t,r){return(t=a(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var l=i((function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),u(this,"_showInputError",(function(e,t){var r=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(n._listSelector.inputErrorClass),r.textContent=t,r.classList.add(n._listSelector.errorClass)})),u(this,"_hideInputError",(function(e){var t=n._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(n._listSelector.inputErrorClass),t.classList.remove(n._listSelector.errorClass),t.textContent=""})),u(this,"_checkInputValidity",(function(e){e.validity.valid?n._hideInputError(e):n._showInputError(e,e.validationMessage)})),u(this,"_toggleButtonState",(function(){n._hasInvalidInput()?(n._buttonElement.setAttribute("disabled",!0),n._buttonElement.classList.add(n._listSelector.inactiveButtonClass)):(n._buttonElement.removeAttribute("disabled"),n._buttonElement.classList.remove(n._listSelector.inactiveButtonClass))})),u(this,"_hasInvalidInput",(function(){return n._inputList.some((function(e){return!e.validity.valid}))})),u(this,"_setEventListeners",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){e.addEventListener("input",(function(){n._checkInputValidity(e),n._toggleButtonState()}))}))})),u(this,"resetValid",(function(){n._toggleButtonState(),n._inputList.forEach((function(e){n._hideInputError(e)}))})),u(this,"enableValidation",(function(){n._setEventListeners(),n._toggleButtonState()})),this._formElement=t,this._listSelector=r,this._inputList=Array.from(t.querySelectorAll(this._listSelector.inputSelector)),this._buttonElement=this._formElement.querySelector(this._listSelector.submitButtonSelector)}));function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}var f=function(){function e(t,r){var n=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderer=n,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(e){var t=this;e.reverse().forEach((function(e){t._renderer(e)}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function y(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,h(n.key),n)}}function d(e,t,r){return(t=h(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}var _=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),d(this,"_handleEscapeKey",(function(e){"Escape"===e.key&&r.close()})),d(this,"_closeByOverlay",(function(e){e.target.classList.contains("popup")&&r.close()})),this._popup=document.querySelector(t),this._popupProfileClose=this._popup.querySelector(".popup__button-close"),this.close=this.close.bind(this)}var t,r;return t=e,(r=[{key:"open",value:function(){this._popup.classList.add("popup_opened"),document.addEventListener("keyup",this._handleEscapeKey)}},{key:"close",value:function(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keyup",this._handleEscapeKey)}},{key:"setEventListeners",value:function(){this._popupProfileClose.addEventListener("click",this.close),this._popup.addEventListener("click",this._closeByOverlay)}}])&&y(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}function b(){return b="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},b.apply(this,arguments)}function g(e,t){return g=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},g(e,t)}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=S(n);if(o){var r=S(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupImage=t._popup.querySelector(".popup__image"),t._popupCaption=t._popup.querySelector(".popup__caption"),t}return t=u,(r=[{key:"open",value:function(e,t){b(S(u.prototype),"open",this).call(this),this._popupImage.src=t,this._popupImage.alt=e,this._popupCaption.textContent=e}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==k(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==k(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===k(o)?o:String(o)),n)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},O.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=C(n);if(o){var r=C(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._formElement=r._popup.querySelector(".popup__form"),r._handleSumbit=t,r._inputList=Array.from(r._formElement.querySelectorAll(".popup__form-input")),r._button=r._formElement.querySelector(".popup__button-save"),r}return t=u,r=[{key:"_getInputValues",value:function(){var e={};return this._inputList.forEach((function(t){e[t.name]=t.value})),e}},{key:"close",value:function(){O(C(u.prototype),"close",this).call(this),this._formElement.reset()}},{key:"loading",value:function(e,t){this._button.textContent=e?"Сохранение...":t}},{key:"setEventListeners",value:function(){var e=this;O(C(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleSumbit(e._getInputValues()),e.close()}))}}],r&&E(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==L(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===L(o)?o:String(o)),n)}var o}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},q.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,r,n,o,i=(n=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(o){var r=T(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=i.call(this,e))._form=r._popup.querySelector(".popup__form"),r._button=r._form.querySelector(".popup__button-save"),r._handleDeleteFormSubmit=t,r._cardInfo={},r}return t=u,(r=[{key:"open",value:function(e){q(T(u.prototype),"open",this).call(this),this._cardInfo=e}},{key:"loadingConfirm",value:function(e){this._button.textContent=e?"Удаление...":"Да"}},{key:"setEventListeners",value:function(){var e=this;this._form.addEventListener("submit",(function(t){t.preventDefault(),e._handleDeleteFormSubmit(e._cardInfo)})),q(T(u.prototype),"setEventListeners",this).call(this)}}])&&I(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),u}(_);function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function B(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==x(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==x(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===x(o)?o:String(o)),n)}var o}var U=function(){function e(t){var r=t.nameSelector,n=t.aboutSelector,o=t.profileAvatar;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=document.querySelector(r),this.userAbout=document.querySelector(n),this.profileAvatar=document.querySelector(o)}var t,r;return t=e,(r=[{key:"setUserAvatar",value:function(e){var t=e.avatar;this.profileAvatar.src=t}},{key:"getUserInfo",value:function(){return{name:this.userName.textContent,about:this.userAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,r=e.about;this.userName.textContent=t,this.userAbout.textContent=r}}])&&B(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function N(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==D(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===D(o)?o:String(o)),n)}var o}var V,M=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,r;return t=e,(r=[{key:"_handleReply",value:function(e){return e.ok?e.json():Promise.reject("код ошибки: ".concat(e.status))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(t){return e._handleReply(t)}))}},{key:"getAllCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(t){return e._handleReply(t)}))}},{key:"updateUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._handleReply(e)}))}},{key:"addNewCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleReply(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleReply(e)}))}},{key:"setLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then((function(e){return t._handleReply(e)}))}},{key:"deleteLike",value:function(e){var t=this;return fetch("".concat(this._url,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then((function(e){return t._handleReply(e)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then((function(e){return t._handleReply(e)}))}}])&&N(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),J=document.querySelector(".content"),K=J.querySelector(".profile__button"),F=J.querySelector(".profile__button-edit"),H=(J.querySelector(".profile__name"),J.querySelector(".profile__description"),document.querySelector(".profile__avatar"),document.querySelector(".popup_data_avatar")),z=(H.querySelector(".popup__form-input_data_avatar"),H.querySelector(".popup__form-avatar")),$=document.querySelector(".popup_data_profile-edit"),G=($.querySelector(".popup__button-close"),$.querySelector("#popup__form-profile")),Q=$.querySelector(".popup__form-input_data_name"),W=$.querySelector(".popup__form-input_data_about"),X=document.querySelector(".popup_data_card-add"),Y=(X.querySelector(".popup__button-close"),X.querySelector(".popup__form-input_data_title"),X.querySelector(".popup__form-input_data_link"),X.querySelector("#popup__form-card")),Z=(document.querySelector(".popup_data_image-add").querySelector(".popup__button-close"),document.querySelector(".profile__button-addCard")),ee=(document.querySelector(".gallery"),document.querySelector(".popup__image"),document.querySelector(".popup__caption"),{formSelector:".popup__form",inputSelector:".popup__form-input",submitButtonSelector:".popup__button-save",inactiveButtonClass:"popup__button-save_inactive",inputErrorClass:"popup__form-input_error",errorClass:"popup__input-error_active"});function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var re=new l(Y,ee);re.enableValidation();var ne=new l(G,ee);ne.enableValidation();var oe=new l(z,ee);oe.enableValidation();var ie=new f({renderer:function(e){ie.addItem(ye(e))}},".gallery"),ue=new P(".popup_data_profile-edit",(function(e){ue.loading(!0),pe.updateUserInfo(e).then((function(e){fe.setUserInfo(e),ue.close()})).catch((function(e){console.log(e)})).finally((function(){ue.loading(!1,"Сохранить")}))}));ue.setEventListeners();var ae=new P(".popup_data_avatar",(function(e){ae.loading(!0),pe.updateUserAvatar(e).then((function(e){fe.setUserAvatar(e),ae.close()})).catch((function(e){console.log(e)})).finally((function(){ae.loading(!1,"Обновить")}))}));ae.setEventListeners();var le=new w(".popup_data_image-add");le.setEventListeners();var ce=new P(".popup_data_card-add",(function(e){ce.loading(!0),pe.addNewCard(e).then((function(e){var t=ye(e);ie.addItem(t),ce.close()})).catch((function(e){console.log(e)})).finally((function(){ce.loading(!1,"Создать")}))}));ce.setEventListeners();var se=new A(".popup_data_delete",(function(e){se.loadingConfirm(!0),pe.deleteCard(e.getCardId()).then((function(){e.deleteCard(),se.close()})).catch((function(e){console.log(e)})).finally((function(){se.loadingConfirm(!1)}))}));se.setEventListeners();var fe=new U({nameSelector:".profile__name",aboutSelector:".profile__description",profileAvatar:".profile__avatar"}),pe=new M({url:"https://mesto.nomoreparties.co/v1/cohort-62",headers:{"Content-Type":"application/json",authorization:"94c5f97f-b8cd-4838-8c4c-bf26058ba6d0"}});Promise.all([pe.getUserInfo(),pe.getAllCards()]).then((function(e){var t,r,n=(r=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,u,a=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return te(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?te(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];V=o._id,fe.setUserInfo(o),fe.setUserAvatar(o),ie.renderItems(i)})).catch((function(e){console.log(e)}));var ye=function(e){var t=new r({data:e,userId:V,handleCardClick:function(e,t){le.open(e,t)},handleLikeClick:function(){t.isLike()?pe.deleteLike(t.getCardId()).then((function(e){t.likeCard(e.likes.length)})).catch((function(e){console.log(e)})):pe.setLike(t.getCardId()).then((function(e){t.likeCard(e.likes.length)})).catch((function(e){console.log(e)}))},handleDeleteCard:function(){se.open(t)}},"#gallery-template");return t.generateCard()};K.addEventListener("click",(function(){ue.open();var e=fe.getUserInfo();Q.value=e.name,W.value=e.about,ne.resetValid()})),Z.addEventListener("click",(function(){ce.open(),re.resetValid()})),F.addEventListener("click",(function(){ae.open(),oe.resetValid()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxJQUFJRixFQUNkLEdBRU4sRUFDQWxNLGlCQUFrQixXQUNoQjRNLEdBQWlCVyxLQUFLRCxFQUN4QixHQUVGLHFCQUlGLE9BRG9CQSxFQUFRTSxjQUU5QixFQUVBckQsRUFBY3JILGlCQUFpQixTQUFTLFdBQ3RDeUgsR0FBYTRDLE9BQ2IsSUFBTU0sRUFBTzlCLEdBQVNtQixjQUN0QnJDLEVBQVVqSixNQUFRaU0sRUFBS3hOLEtBQ3ZCeUssRUFBV2xKLE1BQVFpTSxFQUFLbEYsTUFDeEIyQyxHQUFpQndDLFlBQ25CLElBRUE3QyxFQUFjL0gsaUJBQWlCLFNBQVMsV0FDdEM2SCxHQUFXd0MsT0FDWG5DLEdBQWMwQyxZQUNoQixJQUVBdEQsRUFBa0J0SCxpQkFBaUIsU0FBUyxXQUMxQ3VILEdBQVk4QyxPQUNaaEMsR0FBZ0J1QyxZQUNsQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBOb3RpY2UuanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3lhbmRleC5wcmFrdGlrdW0vLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8veWFuZGV4LnByYWt0aWt1bS8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly95YW5kZXgucHJha3Rpa3VtLy4vc3JjL3V0aWxzL2NvbnN0YW5zdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIHVzZXJJZCwgaGFuZGxlQ2FyZENsaWNrLCBoYW5kbGVMaWtlQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmQgfSxcclxuICAgIHRlbXBsYXRlU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2RhdGEgPSBkYXRhO1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9jYXJkSWQgPSBkYXRhLl9pZDtcclxuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2lzT3duZXIgPSBkYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHRoaXMuX2RlbGV0ZUNhcmQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19idXR0b24tZGVsZXRlJyk7XHJcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2J1dHRvbi1saWtlJyk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X19pbWFnZScpO1xyXG4gICAgdGhpcy5fY2FyZE5hbWUgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5nYWxsZXJ5X190aXRsZScpO1xyXG4gICAgdGhpcy5fbGlrZU51bWJlciA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmdhbGxlcnlfX2xpa2UtbnVtYmVyJyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZ2FsbGVyeV9fZWxlbWVudFwiKS5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjb3VudCkge1xyXG4gICAgdGhpcy5fbGlrZXMgPSB0aGlzLl9kYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fbGlrZU51bWJlci50ZXh0Q29udGVudCA9IGNvdW50O1xyXG4gICAgdGhpcy5fY2FyZExpa2UuY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2J1dHRvbi1saWtlX2FjdGl2ZVwiKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QuY29udGFpbnMoXCJnYWxsZXJ5X19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBzaG93TGlrZSgpIHtcclxuICAgIHRoaXMuX2xpa2VzLmZvckVhY2goKGVsKSA9PiB7XHJcbiAgICAgIGlmIChlbC5faWQgPT09IHRoaXMuX3VzZXJJZCkge1xyXG4gICAgICAgIHRoaXMuX2NhcmRMaWtlLmNsYXNzTGlzdC5hZGQoXCJnYWxsZXJ5X19idXR0b24tbGlrZV9hY3RpdmVcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgaGlkZGVuVHJhc2goKSB7XHJcbiAgICB0aGlzLmlzTXlDYXJkID0gdGhpcy5fdXNlcklkID09PSB0aGlzLl9pc093bmVyO1xyXG4gICAgaWYgKCF0aGlzLmlzTXlDYXJkKSB7XHJcbiAgICAgIHRoaXMuX2RlbGV0ZUNhcmQuY2xhc3NMaXN0LnRvZ2dsZShcImdhbGxlcnlfX2J1dHRvbi1kZWxldGVfaGlkZGVuXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcclxuICB9XHJcblxyXG4gIGdldENhcmRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9jYXJkSWQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgZ2VuZXJhdGVDYXJkKCkge1xyXG4gICAgdGhpcy5fY2FyZE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2xpa2VOdW1iZXIudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5oaWRkZW5UcmFzaCgpO1xyXG4gICAgdGhpcy5zaG93TGlrZSgpO1xyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZGVsZXRlQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRMaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3QudG9nZ2xlKCdnYWxsZXJ5X19idXR0b24tbGlrZV9hY3RpdmUnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuX2NhcmRJbWFnZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX25hbWUsIHRoaXMuX2xpbmspO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoZm9ybUVsZW1lbnQsIGxpc3RTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2xpc3RTZWxlY3RvciA9IGxpc3RTZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9saXN0U2VsZWN0b3IuaW5wdXRTZWxlY3RvcikpO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fbGlzdFNlbGVjdG9yLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvciA9IChpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBlcnJvck1lc3NhZ2U7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9saXN0U2VsZWN0b3IuZXJyb3JDbGFzcyk7XHJcbiAgfTtcclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yID0gKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmlucHV0RXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9saXN0U2VsZWN0b3IuZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH07XHJcblxyXG4gIF9jaGVja0lucHV0VmFsaWRpdHkgPSAoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2xpc3RTZWxlY3Rvci5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fbGlzdFNlbGVjdG9yLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoKSA9PiB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH07XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfTtcclxuXHJcbiAgcmVzZXRWYWxpZCA9ICgpID0+IHtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9KTtcclxuICB9O1xyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uID0gKCkgPT4ge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgfTtcclxufVxyXG5cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShpdGVtKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKGl0ZW1zKSB7XHJcbiAgICBpdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cFByb2ZpbGVDbG9zZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2J1dHRvbi1jbG9zZVwiKTtcclxuICAgIHRoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NhcGVLZXkpO1xyXG4gIH1cclxuXHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZShcInBvcHVwX29wZW5lZFwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXl1cFwiLCB0aGlzLl9oYW5kbGVFc2NhcGVLZXkpO1xyXG5cclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NhcGVLZXkgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikgdGhpcy5jbG9zZSgpO1xyXG4gIH1cclxuXHJcbiAgX2Nsb3NlQnlPdmVybGF5ID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicG9wdXBcIikpIHRoaXMuY2xvc2UoKTtcclxuICB9XHJcblxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwUHJvZmlsZUNsb3NlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlQnlPdmVybGF5KTtcclxuICB9XHJcbn1cclxuXHJcblxyXG5cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKVxyXG4gICAgdGhpcy5fcG9wdXBJbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fY2FwdGlvblwiKTtcclxuICB9XHJcblxyXG4gIG9wZW4obmFtZSwgbGluaykge1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5zcmMgPSBsaW5rO1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uLnRleHRDb250ZW50ID0gbmFtZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZVN1bWJpdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9oYW5kbGVTdW1iaXQgPSBoYW5kbGVTdW1iaXQ7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIucG9wdXBfX2Zvcm0taW5wdXRcIikpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fYnV0dG9uLXNhdmVcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICBjb25zdCBmb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgc3VwZXIuY2xvc2UoKTtcclxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBsb2FkaW5nKGlzTG9hZGluZywgY29udGVudCkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcItCh0L7RhdGA0LDQvdC10L3QuNC1Li4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlU3VtYml0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwTm90aWNlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZXRvciwgaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCkge1xyXG4gICAgc3VwZXIocG9wdXBTZWxldG9yKTtcclxuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtXCIpO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1zYXZlJyk7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVGb3JtU3VibWl0ID0gaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX2NhcmRJbmZvID0ge307XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmQpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuICAgIHRoaXMuX2NhcmRJbmZvID0gY2FyZDtcclxuICB9XHJcblxyXG4gIGxvYWRpbmdDb25maXJtKGlzTG9hZGluZykge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9idXR0b24udGV4dENvbnRlbnQgPSBcItCj0LTQsNC70LXQvdC40LUuLi5cIlxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLnRleHRDb250ZW50ID0gXCLQlNCwXCJcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQodGhpcy5fY2FyZEluZm8pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3RvciwgYWJvdXRTZWxlY3RvciwgcHJvZmlsZUF2YXRhciB9KSB7XHJcbiAgICAgIHRoaXMudXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICAgIHRoaXMudXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhYm91dFNlbGVjdG9yKTtcclxuICAgICAgdGhpcy5wcm9maWxlQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwcm9maWxlQXZhdGFyKTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0VXNlckF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICAgICAgdGhpcy5wcm9maWxlQXZhdGFyLnNyYyA9IGF2YXRhcjtcclxuICAgICAgfVxyXG5cclxuICAgICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgIG5hbWU6IHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgICAgICBhYm91dDogdGhpcy51c2VyQWJvdXQudGV4dENvbnRlbnQsXHJcbiAgICAgICAgfTtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgc2V0VXNlckluZm8oe25hbWUsIGFib3V0fSkge1xyXG4gICAgICAgIHRoaXMudXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMudXNlckFib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgICAgIH1cclxuICAgIH0iLCJpbXBvcnQgXCIuL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQgQ2FyZCAgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciAgZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcclxuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwTm90aWNlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwTm90aWNlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVCdXR0b24sXHJcbiAgcHJvZmlsZUJ1dHRvbkVkaXQsXHJcbiAgZm9ybUVkaXRQcm9maWxlLFxyXG4gIGlucHV0TmFtZSxcclxuICBpbnB1dEFib3V0LFxyXG4gIGNhcmRGb3JtLFxyXG4gIGJ1dHRvbkFkZENhcmQsXHJcbiAgdmFsaWRhdGlvbkNvbmZpZyxcclxuICBhcGlQYXJhbWV0ZXJzLFxyXG4gIGF2YXRhckZvcm1cclxufVxyXG4gIGZyb20gXCIuLi91dGlscy9jb25zdGFuc3QuanNcIjtcclxuXHJcbmxldCB1c2VySWQ7XHJcblxyXG5jb25zdCBjYXJkVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY2FyZEZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG5jYXJkVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IHByb2ZpbGVWYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihmb3JtRWRpdFByb2ZpbGUsIHZhbGlkYXRpb25Db25maWcpO1xyXG5wcm9maWxlVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbmNvbnN0IGF2YXRhclZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGF2YXRhckZvcm0sIHZhbGlkYXRpb25Db25maWcpO1xyXG5hdmF0YXJWYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKHtcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgIHNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKGl0ZW0pKTtcclxuICB9LFxyXG59LFxyXG4gIFwiLmdhbGxlcnlcIik7XHJcblxyXG5jb25zdCBwb3B1cFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9kYXRhX3Byb2ZpbGUtZWRpdFwiLCAodXNlckRhdGEpID0+IHtcclxuICBwb3B1cFByb2ZpbGUubG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC51cGRhdGVVc2VySW5mbyh1c2VyRGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8ocmVzKTtcclxuICAgICAgcG9wdXBQcm9maWxlLmNsb3NlKCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHBvcHVwUHJvZmlsZS5sb2FkaW5nKGZhbHNlLCBcItCh0L7RhdGA0LDQvdC40YLRjFwiKTtcclxuICAgIH0pO1xyXG59KTtcclxucG9wdXBQcm9maWxlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cEF2YXRhciA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiLnBvcHVwX2RhdGFfYXZhdGFyXCIsICh1c2VyRGF0YSkgPT4ge1xyXG4gIHBvcHVwQXZhdGFyLmxvYWRpbmcodHJ1ZSk7XHJcbiAgYXBpXHJcbiAgICAudXBkYXRlVXNlckF2YXRhcih1c2VyRGF0YSlcclxuICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihyZXMpO1xyXG4gICAgICBwb3B1cEF2YXRhci5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cEF2YXRhci5sb2FkaW5nKGZhbHNlLCBcItCe0LHQvdC+0LLQuNGC0YxcIik7XHJcbiAgICB9KTtcclxufSk7XHJcbnBvcHVwQXZhdGFyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG5jb25zdCBwb3B1cFdpdGhJbWFnZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF9kYXRhX2ltYWdlLWFkZFwiKTtcclxucG9wdXBXaXRoSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHMgPSBuZXcgUG9wdXBXaXRoRm9ybShcIi5wb3B1cF9kYXRhX2NhcmQtYWRkXCIsIChjYXJkRGF0YSkgPT4ge1xyXG4gIHBvcHVwQ2FyZHMubG9hZGluZyh0cnVlKTtcclxuICBhcGlcclxuICAgIC5hZGROZXdDYXJkKGNhcmREYXRhKVxyXG4gICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmQocmVzKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgcG9wdXBDYXJkcy5jbG9zZSgpO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KVxyXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xyXG4gICAgICBwb3B1cENhcmRzLmxvYWRpbmcoZmFsc2UsIFwi0KHQvtC30LTQsNGC0YxcIik7XHJcbiAgICB9KTtcclxufSk7XHJcbnBvcHVwQ2FyZHMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHBvcHVwQ2FyZHNEZWxldGUgPSBuZXcgUG9wdXBOb3RpY2UoXCIucG9wdXBfZGF0YV9kZWxldGVcIiwgKGNhcmQpID0+IHtcclxuICBwb3B1cENhcmRzRGVsZXRlLmxvYWRpbmdDb25maXJtKHRydWUpO1xyXG4gIGFwaVxyXG4gICAgLmRlbGV0ZUNhcmQoY2FyZC5nZXRDYXJkSWQoKSlcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XHJcbiAgICAgIHBvcHVwQ2FyZHNEZWxldGUuY2xvc2UoKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgcG9wdXBDYXJkc0RlbGV0ZS5sb2FkaW5nQ29uZmlybShmYWxzZSk7XHJcbiAgICB9KTtcclxufSk7XHJcbnBvcHVwQ2FyZHNEZWxldGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX25hbWVcIixcclxuICBhYm91dFNlbGVjdG9yOiBcIi5wcm9maWxlX19kZXNjcmlwdGlvblwiLFxyXG4gIHByb2ZpbGVBdmF0YXI6IFwiLnByb2ZpbGVfX2F2YXRhclwiLFxyXG59KTtcclxuXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpUGFyYW1ldGVycyk7XHJcblxyXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRBbGxDYXJkcygpXSlcclxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkSXRlbXNdKSA9PiB7XHJcbiAgICB1c2VySWQgPSB1c2VyRGF0YS5faWQ7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh1c2VyRGF0YSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHVzZXJEYXRhKTtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZEl0ZW1zKTtcclxuICB9KVxyXG4gIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gIH0pO1xyXG5cclxuY29uc3QgY3JlYXRlQ2FyZCA9IChpdGVtKSA9PiB7XHJcbiAgY29uc3QgY2FyZE5ldyA9IG5ldyBDYXJkKFxyXG4gICAge1xyXG4gICAgICBkYXRhOiBpdGVtLFxyXG4gICAgICB1c2VySWQ6IHVzZXJJZCxcclxuICAgICAgaGFuZGxlQ2FyZENsaWNrOiAobmFtZSwgbGluaykgPT4ge1xyXG4gICAgICAgIHBvcHVwV2l0aEltYWdlLm9wZW4obmFtZSwgbGluayk7XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZUxpa2VDbGljazogKCkgPT4ge1xyXG4gICAgICAgIGlmIChjYXJkTmV3LmlzTGlrZSgpKSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmRlbGV0ZUxpa2UoY2FyZE5ldy5nZXRDYXJkSWQoKSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmROZXcubGlrZUNhcmQocmVzLmxpa2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAuc2V0TGlrZShjYXJkTmV3LmdldENhcmRJZCgpKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZE5ldy5saWtlQ2FyZChyZXMubGlrZXMubGVuZ3RoKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0sXHJcbiAgICAgIGhhbmRsZURlbGV0ZUNhcmQ6ICgpID0+IHtcclxuICAgICAgICBwb3B1cENhcmRzRGVsZXRlLm9wZW4oY2FyZE5ldyk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgXCIjZ2FsbGVyeS10ZW1wbGF0ZVwiXHJcbiAgKTtcclxuXHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkTmV3LmdlbmVyYXRlQ2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufTtcclxuXHJcbnByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlLm9wZW4oKTtcclxuICBjb25zdCBpbmZvID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBpbnB1dE5hbWUudmFsdWUgPSBpbmZvLm5hbWU7XHJcbiAgaW5wdXRBYm91dC52YWx1ZSA9IGluZm8uYWJvdXQ7XHJcbiAgcHJvZmlsZVZhbGlkYXRvci5yZXNldFZhbGlkKCk7XHJcbn0pO1xyXG5cclxuYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cENhcmRzLm9wZW4oKTtcclxuICBjYXJkVmFsaWRhdG9yLnJlc2V0VmFsaWQoKTtcclxufSk7XHJcblxyXG5wcm9maWxlQnV0dG9uRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBwb3B1cEF2YXRhci5vcGVuKCk7XHJcbiAgYXZhdGFyVmFsaWRhdG9yLnJlc2V0VmFsaWQoKTtcclxufSk7IiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwaVBhcmFtZXRlcnMpIHtcclxuICAgICAgdGhpcy5fdXJsID0gYXBpUGFyYW1ldGVycy51cmw7XHJcbiAgICAgIHRoaXMuX2hlYWRlcnMgPSBhcGlQYXJhbWV0ZXJzLmhlYWRlcnM7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBfaGFuZGxlUmVwbHkocmVzKSB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYNC60L7QtCDQvtGI0LjQsdC60Lg6ICR7cmVzLnN0YXR1c31gKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7IHJldHVybiB0aGlzLl9oYW5kbGVSZXBseShyZXMpOyB9KVxyXG4gICAgfVxyXG4gIFxyXG4gICAgZ2V0QWxsQ2FyZHMoKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7IHJldHVybiB0aGlzLl9oYW5kbGVSZXBseShyZXMpOyB9KVxyXG4gICAgfVxyXG4gIFxyXG4gICAgdXBkYXRlVXNlckluZm8oZGF0YSkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogZGF0YS5uYW1lLCBhYm91dDogZGF0YS5hYm91dCB9KSxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHsgcmV0dXJuIHRoaXMuX2hhbmRsZVJlcGx5KHJlcyk7IH0pXHJcbiAgICB9XHJcbiAgXHJcbiAgICBhZGROZXdDYXJkKGNhcmREYXRhKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShjYXJkRGF0YSksXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7IHJldHVybiB0aGlzLl9oYW5kbGVSZXBseShyZXMpOyB9KVxyXG4gICAgfVxyXG4gIFxyXG4gICAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS9jYXJkcy8ke2lkfWAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgfSlcclxuICAgICAgLnRoZW4ocmVzID0+IHsgcmV0dXJuIHRoaXMuX2hhbmRsZVJlcGx5KHJlcyk7IH0pXHJcbiAgICB9XHJcbiAgXHJcbiAgICBzZXRMaWtlKGlkKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4geyByZXR1cm4gdGhpcy5faGFuZGxlUmVwbHkocmVzKTsgfSlcclxuICAgIH1cclxuICBcclxuICAgIGRlbGV0ZUxpa2UoaWQpIHtcclxuICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XHJcbiAgICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIH0pXHJcbiAgICAgIC50aGVuKHJlcyA9PiB7IHJldHVybiB0aGlzLl9oYW5kbGVSZXBseShyZXMpOyB9KVxyXG4gICAgfVxyXG4gIFxyXG4gICAgdXBkYXRlVXNlckF2YXRhcihkYXRhKSB7XHJcbiAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGRhdGEpLFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbihyZXMgPT4geyByZXR1cm4gdGhpcy5faGFuZGxlUmVwbHkocmVzKTsgfSlcclxuICAgIH1cclxuICB9IiwiZXhwb3J0IGNvbnN0IGNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY29udGVudCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbiA9IGNvbnRlbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2J1dHRvbicpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUJ1dHRvbkVkaXQgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19idXR0b24tZWRpdCcpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBjb250ZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19kZXNjcmlwdGlvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVBdmF0YXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9kYXRhX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhcklucHV0ID0gcG9wdXBBdmF0YXIucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybS1pbnB1dF9kYXRhX2F2YXRhclwiKTtcclxuZXhwb3J0IGNvbnN0IGF2YXRhckZvcm0gPSBwb3B1cEF2YXRhci5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19mb3JtLWF2YXRhclwiKTtcclxuXHJcbmV4cG9ydCBjb25zdCBwb3B1cFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfZGF0YV9wcm9maWxlLWVkaXQnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwUHJvZmlsZUNsb3NlID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcbmV4cG9ydCBjb25zdCBmb3JtRWRpdFByb2ZpbGUgPSBwb3B1cFByb2ZpbGUucXVlcnlTZWxlY3RvcignI3BvcHVwX19mb3JtLXByb2ZpbGUnKTtcclxuZXhwb3J0IGNvbnN0IGlucHV0TmFtZSA9IHBvcHVwUHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV9uYW1lJyk7XHJcbmV4cG9ydCBjb25zdCBpbnB1dEFib3V0ID0gcG9wdXBQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1pbnB1dF9kYXRhX2Fib3V0Jyk7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9kYXRhX2NhcmQtYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRzQ2xvc2UgPSBwb3B1cENhcmRzLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcbmV4cG9ydCBjb25zdCBuYW1lID0gcG9wdXBDYXJkcy5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0taW5wdXRfZGF0YV90aXRsZScpO1xyXG5leHBvcnQgY29uc3QgaW5wdXRJbWFnZSA9IHBvcHVwQ2FyZHMucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWlucHV0X2RhdGFfbGluaycpO1xyXG5leHBvcnQgY29uc3QgY2FyZEZvcm0gPSBwb3B1cENhcmRzLnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cF9fZm9ybS1jYXJkJyk7XHJcblxyXG5leHBvcnQgY29uc3QgcG9wdXBDYXJkc0ltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX2RhdGFfaW1hZ2UtYWRkJyk7XHJcbmV4cG9ydCBjb25zdCBwb3B1cENhcmRzSW1hZ2VDbG9zZSA9IHBvcHVwQ2FyZHNJbWFnZS5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2J1dHRvbi1jbG9zZScpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZENhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYnV0dG9uLWFkZENhcmQnKTtcclxuZXhwb3J0IGNvbnN0IGNhcmRDb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZ2FsbGVyeScpO1xyXG5leHBvcnQgY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1hZ2UnKTtcclxuZXhwb3J0IGNvbnN0IHBvcHVwQ2FwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGFwaVBhcmFtZXRlcnMgPSB7XHJcbiAgICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC02MlwiLFxyXG4gICAgaGVhZGVyczoge1xyXG4gICAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICAgICAgYXV0aG9yaXphdGlvbjogXCI5NGM1Zjk3Zi1iOGNkLTQ4MzgtOGM0Yy1iZjI2MDU4YmE2ZDBcIixcclxuICAgIH0sXHJcbiAgfTtcclxuXHJcbmV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gICAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICAgIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0taW5wdXQnLFxyXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbi1zYXZlJyxcclxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fYnV0dG9uLXNhdmVfaW5hY3RpdmUnLFxyXG4gICAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2Zvcm0taW5wdXRfZXJyb3InLFxyXG4gICAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnLFxyXG59OyJdLCJuYW1lcyI6WyJDYXJkIiwiX3JlZiIsInRlbXBsYXRlU2VsZWN0b3IiLCJkYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJfZGF0YSIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9jYXJkSWQiLCJfaWQiLCJfbGlrZXMiLCJsaWtlcyIsIl91c2VySWQiLCJfaXNPd25lciIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2FyZCIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfZGVsZXRlQ2FyZCIsInF1ZXJ5U2VsZWN0b3IiLCJfY2FyZExpa2UiLCJfY2FyZEltYWdlIiwiX2NhcmROYW1lIiwiX2xpa2VOdW1iZXIiLCJrZXkiLCJ2YWx1ZSIsImRvY3VtZW50IiwiY29udGVudCIsImNsb25lTm9kZSIsImNvdW50IiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJjb250YWlucyIsIl90aGlzIiwiZm9yRWFjaCIsImVsIiwiYWRkIiwiaXNNeUNhcmQiLCJyZW1vdmUiLCJhbHQiLCJzcmMiLCJsZW5ndGgiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJoaWRkZW5UcmFzaCIsInNob3dMaWtlIiwiX3RoaXMyIiwiYWRkRXZlbnRMaXN0ZW5lciIsIkZvcm1WYWxpZGF0b3IiLCJfY3JlYXRlQ2xhc3MiLCJmb3JtRWxlbWVudCIsImxpc3RTZWxlY3RvciIsIl9kZWZpbmVQcm9wZXJ0eSIsImlucHV0RWxlbWVudCIsImVycm9yTWVzc2FnZSIsImVycm9yRWxlbWVudCIsIl9mb3JtRWxlbWVudCIsImNvbmNhdCIsImlkIiwiX2xpc3RTZWxlY3RvciIsImlucHV0RXJyb3JDbGFzcyIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJzZXRBdHRyaWJ1dGUiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwicmVtb3ZlQXR0cmlidXRlIiwiX2lucHV0TGlzdCIsInNvbWUiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsIml0ZW0iLCJwcmVwZW5kIiwiaXRlbXMiLCJyZXZlcnNlIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwiZXZ0IiwiY2xvc2UiLCJ0YXJnZXQiLCJfcG9wdXAiLCJfcG9wdXBQcm9maWxlQ2xvc2UiLCJiaW5kIiwiX2hhbmRsZUVzY2FwZUtleSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfY2xvc2VCeU92ZXJsYXkiLCJQb3B1cFdpdGhJbWFnZSIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImNhbGwiLCJfcG9wdXBJbWFnZSIsIl9wb3B1cENhcHRpb24iLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZVN1bWJpdCIsIl9oYW5kbGVTdW1iaXQiLCJfYnV0dG9uIiwiZm9ybVZhbHVlcyIsImlucHV0IiwicmVzZXQiLCJpc0xvYWRpbmciLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsIlBvcHVwTm90aWNlIiwicG9wdXBTZWxldG9yIiwiaGFuZGxlRGVsZXRlRm9ybVN1Ym1pdCIsIl9mb3JtIiwiX2hhbmRsZURlbGV0ZUZvcm1TdWJtaXQiLCJfY2FyZEluZm8iLCJjYXJkIiwiVXNlckluZm8iLCJuYW1lU2VsZWN0b3IiLCJhYm91dFNlbGVjdG9yIiwicHJvZmlsZUF2YXRhciIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiX3JlZjIiLCJhdmF0YXIiLCJhYm91dCIsIl9yZWYzIiwiQXBpIiwiYXBpUGFyYW1ldGVycyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZmV0Y2giLCJ0aGVuIiwiX2hhbmRsZVJlcGx5IiwiX3RoaXMzIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJjYXJkRGF0YSIsIl90aGlzNCIsIl90aGlzNSIsIl90aGlzNiIsIl90aGlzNyIsIl90aGlzOCIsInByb2ZpbGVCdXR0b24iLCJwcm9maWxlQnV0dG9uRWRpdCIsInBvcHVwQXZhdGFyIiwiYXZhdGFyRm9ybSIsInBvcHVwUHJvZmlsZSIsImZvcm1FZGl0UHJvZmlsZSIsImlucHV0TmFtZSIsImlucHV0QWJvdXQiLCJwb3B1cENhcmRzIiwiY2FyZEZvcm0iLCJidXR0b25BZGRDYXJkIiwidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImNhcmRWYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwicHJvZmlsZVZhbGlkYXRvciIsImF2YXRhclZhbGlkYXRvciIsInNlY3Rpb24iLCJhZGRJdGVtIiwiY3JlYXRlQ2FyZCIsInVzZXJEYXRhIiwibG9hZGluZyIsImFwaSIsInVwZGF0ZVVzZXJJbmZvIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImZpbmFsbHkiLCJzZXRFdmVudExpc3RlbmVycyIsInVwZGF0ZVVzZXJBdmF0YXIiLCJzZXRVc2VyQXZhdGFyIiwicG9wdXBXaXRoSW1hZ2UiLCJhZGROZXdDYXJkIiwiY2FyZEVsZW1lbnQiLCJwb3B1cENhcmRzRGVsZXRlIiwibG9hZGluZ0NvbmZpcm0iLCJkZWxldGVDYXJkIiwiZ2V0Q2FyZElkIiwiYXV0aG9yaXphdGlvbiIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0QWxsQ2FyZHMiLCJjYXJkSXRlbXMiLCJyZW5kZXJJdGVtcyIsImNhcmROZXciLCJvcGVuIiwiaXNMaWtlIiwiZGVsZXRlTGlrZSIsImxpa2VDYXJkIiwic2V0TGlrZSIsImdlbmVyYXRlQ2FyZCIsImluZm8iLCJyZXNldFZhbGlkIl0sInNvdXJjZVJvb3QiOiIifQ==